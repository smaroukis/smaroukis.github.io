<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Spencer's Power Blog</title>
    <description>Electrical engineer. Previously University of Michigan and Pacific Gas &amp; Electric.</description>
    <link>https://smaroukis.github.io/</link>
    <atom:link href="https://smaroukis.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 02 Jun 2020 22:14:54 +0000</pubDate>
    <lastBuildDate>Tue, 02 Jun 2020 22:14:54 +0000</lastBuildDate>
    <generator>Jekyll v3.8.6</generator>
    
      <item>
        <title>Current Transformers for Protective Relaying -- Saturation and Knee Point Explained</title>
        <description>
&lt;p&gt;Current transformers (CTs) are one of the most important devices in a power system, yet it took me a few years in the industry to find a proper explanation of CT saturation and the meaning “knee point” of the excitation curve.  The knee point is not the point of saturation — the point of saturation corresponds to a volt-time area since the flux is given by the integration of the voltage waveform. Although it is desired to operate in the linear region below the knee, where the excitation current is small compared to the current through the secondary burden, CTs often operate beyond this knee point for relaying applications due to asymmetrical fault currents, remanence flux, and design constraints.&lt;/p&gt;

&lt;h2 class=&quot;no_toc&quot; id=&quot;contents&quot;&gt;Contents&lt;/h2&gt;
&lt;ol id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#current-transformer-theory&quot; id=&quot;markdown-toc-current-transformer-theory&quot;&gt;Current Transformer Theory&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#equivalent-circuit&quot; id=&quot;markdown-toc-equivalent-circuit&quot;&gt;Equivalent Circuit&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-volt-time-area&quot; id=&quot;markdown-toc-the-volt-time-area&quot;&gt;The Volt-Time Area&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#excitation-curve-and-the-knee-point&quot; id=&quot;markdown-toc-excitation-curve-and-the-knee-point&quot;&gt;Excitation Curve and the Knee Point&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#criterion-to-avoid-saturation&quot; id=&quot;markdown-toc-criterion-to-avoid-saturation&quot;&gt;Criterion to Avoid Saturation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ct-ratings-classes-and-other-types&quot; id=&quot;markdown-toc-ct-ratings-classes-and-other-types&quot;&gt;CT Ratings, Classes and Other Types&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#other-ct-types&quot; id=&quot;markdown-toc-other-ct-types&quot;&gt;Other CT types&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#further-reading&quot; id=&quot;markdown-toc-further-reading&quot;&gt;Further Reading&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#references--footnotes&quot; id=&quot;markdown-toc-references--footnotes&quot;&gt;References &amp;amp; Footnotes&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;current-transformer-theory&quot;&gt;Current Transformer Theory&lt;/h2&gt;

&lt;p&gt;Transformers operate on the fundamental principle that a time-varying magnetic flux induces a voltage to oppose it (Faraday’s Law). A current through a primary winding creates a magnetic field (H-field) which induces an amount of flux depending on the magnetic properties of the material, the excitation level and the number of turns of coil around the secondary.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/ct-saturation/window_ct.png&quot; alt=&quot;Note: load must be connected for current to flow. Never open circuit a CT.&quot; /&gt;  
    &lt;figcaption&gt;Note: load must be connected for current to flow. Never open circuit a CT.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;e=N\frac{d\phi}{dt}&lt;/script&gt;

&lt;p&gt;When a load (normally called a “burden”) is connected to this secondary voltage, a current will flow. How well this secondary current is an exact replication of the primary current depends on the level of excitation. At low excitation values all of the current is used to develop the core’s magnetic field and at high excitation values the core can saturate.&lt;/p&gt;

&lt;p&gt;The magnetic atoms in the magnetic core material react in a non-linear fashion when an H-field is applied, since they can only “line-up” so much in one direction. This results in the familiar B-H curve showing magnetic flux density vs. magnetic field intensity. The Flux-Magnetizing Current curve has the same shape since it is the magnetizing current driving the H-field and the flux also includes the proportional affect of the area of the magnetic core. This curve will be different for varying levels of excitation.&lt;/p&gt;

&lt;p&gt;Also note that &lt;script type=&quot;math/tex&quot;&gt;d\phi/dI&lt;/script&gt; represents the magnetizing inductance of the core.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/ct-saturation/excitation.gif&quot; alt=&quot;B-H Curve of CT for varying levels of excitation&quot; /&gt;&lt;/p&gt;

&lt;p class=&quot;caption&quot;&gt;The B-H curve of a current transformer core for varying levels of excitation&lt;sup id=&quot;fnref:Zocholl&quot;&gt;&lt;a href=&quot;#fn:Zocholl&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;To understand the above graph we need the equivalent circuit of the current transformer.&lt;/p&gt;

&lt;h2 id=&quot;equivalent-circuit&quot;&gt;Equivalent Circuit&lt;/h2&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/ct-saturation/ct_equivalent_circuit.png&quot; alt=&quot;Equivalent circuit of current transformer. Note the exciting branch is made up of a varying reactive magnetizing impedance and resistive losses.&quot; /&gt;  
    &lt;figcaption&gt;Equivalent circuit of current transformer. Note the exciting branch is made up of a varying reactive magnetizing impedance and resistive losses.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Since the primary turns is 1, the burden appears on the primary as a very small impedance (&lt;script type=&quot;math/tex&quot;&gt;Z_B'=Z_B \cdot 1/N_2^2&lt;/script&gt;).&lt;/p&gt;

&lt;p&gt;Clearly not all current is delivered to the burden (which is what we can measure, and what our relays “see”). The &lt;strong&gt;ratio correction factor&lt;/strong&gt; (RCF) is used to correct the secondary current for this non-ideal case.&lt;/p&gt;

&lt;p&gt;Above we can see the variable magnetizing impedance. At low excitation levels &lt;script type=&quot;math/tex&quot;&gt;d\phi / dI = L&lt;/script&gt; is low, so the majority of the total secondary current (&lt;script type=&quot;math/tex&quot;&gt;I_{ST}&lt;/script&gt;) flows over &lt;script type=&quot;math/tex&quot;&gt;Z_e&lt;/script&gt; and not through the burden. At moderate levels of excitation the magnetizing impedance increases and most of the secondary current flows over the burden. At high levels of excitation the impedance flips between an open and a short. This is the saturation region where the secondary current that flows across the burden (which is the only current that we “see”) is not an accurate representation of the primary current.&lt;/p&gt;

&lt;p&gt;The magnetization current lags the exciting voltage by 90 degrees and the losses are nearly in phase. These two vectors give the excitation current.&lt;/p&gt;

&lt;p&gt;Simplifying the equivalent circuit above, the secondary can be represented as a current source from the ideal transformer where &lt;script type=&quot;math/tex&quot;&gt;I_{sec}=I_{pri} \cdot N_1/N_2&lt;/script&gt;. This current is “fixed” depending on the primary current — the excitation voltage will be developed due to the connected burden, secondary resistance and leakage impedance.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/ct-saturation/ct_secondary_equivalent_excitation.gif&quot; alt=&quot;A simplified secondary CT equivalent with animation of different excitation levels: 1) the current source is a reflection of the primary current 2) since the magnetizing impedance dominates the losses, we just show Zm 3) ) leakage reactance is negligible for Class C CTs.  At low excitation (green), the majority of current flows through the small magnetizing impedance to generate the magnetic field. At moderate levels of excitation (orange) most of the secondary current flows through the burden. At high levels of excitation (red) the magnetizing impedance switches between an open and a short during different values of the sinusoidal current and resulting B-H curve.&quot; /&gt;  
    &lt;figcaption&gt;A simplified secondary CT equivalent with animation of different excitation levels: 1) the current source is a reflection of the primary current 2) since the magnetizing impedance dominates the losses, we just show Zm 3) ) leakage reactance is negligible for Class C CTs.  At low excitation (green), the majority of current flows through the small magnetizing impedance to generate the magnetic field. At moderate levels of excitation (orange) most of the secondary current flows through the burden. At high levels of excitation (red) the magnetizing impedance switches between an open and a short during different values of the sinusoidal current and resulting B-H curve.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;An increase in burden impedance at a given current will demand an increase in excitation voltage.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/ct-saturation/ct_equivalent_circuit_phasors.png&quot; alt=&quot;Phasor diagram of CT secondary&quot; /&gt;&lt;/p&gt;

&lt;p class=&quot;caption&quot;&gt;Phasor diagram of CT secondary with standard burden of 0.5 power factor (60 degrees). Take the secondary current and add the voltage drop from the leakage reactance and winding impedance. This voltage plus the secondary terminal voltage equals the excitation voltage. The flux and magnetizing current lag this voltage by 90 degrees.&lt;sup id=&quot;fnref:c37&quot;&gt;&lt;a href=&quot;#fn:c37&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;h2 id=&quot;the-volt-time-area&quot;&gt;The Volt-Time Area&lt;/h2&gt;

&lt;p&gt;Integrating both sides of the flux-voltage equation gives&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\phi N=BAN=\int_0^t v\cdot dt&lt;/script&gt;

&lt;p&gt;So the flux can be thought of as the area under the voltage sine wave, known as the volt-time area. There is a value for this volt-time area that corresponds to the saturation flux point. Increased area due to asymmetrical offset or a higher peak can result in the core going above the saturation flux limit.&lt;/p&gt;

&lt;p&gt;Other things to note:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;a larger cross sectional area results in an increased volt-time area before saturation&lt;/li&gt;
  &lt;li&gt;from Faraday’s law, an increase in turns reduces the amount of flux necessary to produce a given secondary EMF, which means saturation occurs at a proportionally higher voltage when the number of secondary turns is increased&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;excitation-curve-and-the-knee-point&quot;&gt;Excitation Curve and the Knee Point&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;The rating is the voltage the CT can support across a standard burden with 20 times rated current without exceeding 10% ratio correction error&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The excitation curve is a graph of the secondary voltage (&lt;script type=&quot;math/tex&quot;&gt;V_e&lt;/script&gt;) vs the excitation current (&lt;script type=&quot;math/tex&quot;&gt;I_e&lt;/script&gt;). This shows us what current the burden &lt;strong&gt;won’t&lt;/strong&gt; see for various voltage levels. It is directly related to the magnetizing impedance given by &lt;script type=&quot;math/tex&quot;&gt;V_e/I_e&lt;/script&gt;. This also gives us our ratio correction factor.&lt;/p&gt;

&lt;p&gt;![Excitation curve for CT][excitation_curve_ann.png]&lt;/p&gt;

&lt;p class=&quot;caption&quot;&gt;The standard CT excitation curve that manufacturers provide. Here we can read the voltage rating from the excitation voltage at 10A of excitation current. The voltage rating must be less the voltage read off the graph minus the winding and leakage drop, which means that the CT can develop this voltage without exceeding 10A excitation (or 10% error at 100A secondary)&lt;sup id=&quot;fnref:Hargrave&quot;&gt;&lt;a href=&quot;#fn:Hargrave&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;The “knee point” represents the maximum permeability, or the minimum magnetizing impedance. Since most current will flow through the burden at this point, it is where we want our CT to operate for maximum fault currents.&lt;/p&gt;

&lt;p&gt;The voltage rating can be taken directly from this since “the rating is the voltage the CT can support across a standard burden with 20 times rated current without exceeding 10% ratio correction error”&lt;sup id=&quot;fnref:c37:1&quot;&gt;&lt;a href=&quot;#fn:c37&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. Since 20 times the rated secondary current of 5A equals 100A, a 10% ratio correction error means 10A of shunted excitation current. We can read this secondary voltage corresponding to 10A excitation. This voltage value from the graph minus voltage drop of the winding resistance should be &lt;strong&gt;&lt;em&gt;greater than&lt;/em&gt;&lt;/strong&gt; the voltage rating of the CT, meaning that the CT can develop this voltage level without saturating the flux core.&lt;/p&gt;

&lt;p&gt;For multi-ratio CTs, the ability to develop voltage without saturating is scaled proportionally by the number of turns. Thus for a C400 600:5 CT operating on the 300:5 tap, the new voltage “rating” is 200V.&lt;/p&gt;

&lt;h2 id=&quot;criterion-to-avoid-saturation&quot;&gt;Criterion to Avoid Saturation&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;When the DC offset is at maximum, the CT flux can potentially increase to &lt;script type=&quot;math/tex&quot;&gt;1+X/R&lt;/script&gt; times the flux of the non-offset component&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Saturation can occur from both symmetrical and asymmetrical currents on the primary. Symmetrical current waveforms with a large peak can saturate the core within the first cycle. Asymmetrical current waveforms with a DC offset may not saturate in the first cycle, but in the latter cycle since the volt-time area does not cancel out with negative values.&lt;/p&gt;

&lt;p&gt;The asymmetrical current is due to the X/R system ratio. With the voltage developed by the fault current and the secondary burden, we can develop the criterion to avoid saturation (to stay under the voltage rating of the CT) as&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;20 \ge (\frac{X}{R}+1)\cdot I_f \cdot Z_b&lt;/script&gt;

&lt;p&gt;We risk saturation if&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The fault current is higher than 20 times rated current OR&lt;/li&gt;
  &lt;li&gt;The connected burden is higher than standard&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This gives the following rule of thumbs:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Limit max fault current &amp;lt;100A max on secondary&lt;/li&gt;
  &lt;li&gt;Limit &lt;script type=&quot;math/tex&quot;&gt;I_f \cdot Z_b&lt;/script&gt; &amp;lt; half the voltage rating of the CT. This allows for DC offset and remanence flux (&lt;script type=&quot;math/tex&quot;&gt;I_f&lt;/script&gt; is maximum symmetrical fault current)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ct-ratings-classes-and-other-types&quot;&gt;CT Ratings, Classes and Other Types&lt;/h2&gt;

&lt;p&gt;Almost all CTs used in protective relaying are class C or K&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;C&lt;/strong&gt;: “&lt;strong&gt;Calculated&lt;/strong&gt;”, negligible leakage flux, excitation curve can be used directly to determine performance, assumed that burden and excitation currents are in phase and that secondary winding is uniformly distributed; ANSI
    &lt;ul&gt;
      &lt;li&gt;e.g. C100, C200, C400, C800 corresponding to secondary voltages (@100A) of 100V,200V,400V,800V etc and burdens of 1,2,4,8 respectively (due to Z=V/100);  ANSI specifies PF of burden at 0.5 (60 degrees);&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;K&lt;/strong&gt;: same as C + knee-point voltage at least 70% of voltage rating; results in larger core cross section area&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;T&lt;/strong&gt;: “&lt;strong&gt;Test&lt;/strong&gt;”, ratio error must be determined by test; has appreciable core flux leakage and thus ratio error&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;H,L&lt;/strong&gt;: old ANSI classifications mostly for CTs manufactured before 1954&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;other-ct-types&quot;&gt;Other CT types&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Gapped cores&lt;/strong&gt;
An air gap can be added to the core which 1) increases magnetizing current and 2) reduces the possibility of remanence. Large-gapped cores are known as linearized cores; the effect is to increase the linear region of the BH curve &amp;amp; decrease the permeability (lower magnetizing impedance).&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/ct-saturation/core_gap_effect.gif&quot; alt=&quot;An air gap can be introduce to extend the linear region of the B-H curve at the expense of reduced permeability.&quot; /&gt;  
    &lt;figcaption&gt;An air gap can be introduce to extend the linear region of the B-H curve at the expense of reduced permeability.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;further-reading&quot;&gt;Further Reading&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;C57.13-2016: IEEE Standard Requirements for Instrumentation Transformers&lt;/li&gt;
  &lt;li&gt;Moreton, S. D. “A simple method for the determination of bushing-current-transformer characteristics.” Electrical Engineering 62.9 (1943): 581-585.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;references--footnotes&quot;&gt;References &amp;amp; Footnotes&lt;/h2&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:Zocholl&quot;&gt;
      &lt;p&gt;Zocholl, Stanley E. &lt;em&gt;Analyzing and applying current transformers&lt;/em&gt;. Schweitzer Engineering Laboratories, Incorporated, 2004. &lt;a href=&quot;#fnref:Zocholl&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:c37&quot;&gt;
      &lt;p&gt;C37.110-2007: IEEE Guide for the Application of Current Transformers Used for Protective Relaying Purposes &lt;a href=&quot;#fnref:c37&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt; &lt;a href=&quot;#fnref:c37:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:Hargrave&quot;&gt;
      &lt;p&gt;Hargrave, Ariana, Michael J. Thompson, and Brad Heilman. “Beyond the knee point: A practical guide to CT saturation.” 2018 71st Annual Conference for Protective Relay Engineers (CPRE). IEEE, 2018. Available: &lt;a href=&quot;https://cdn.selinc.com/assets/Literature/Publications/Technical%20Papers/6811_BeyondKneePoint_AH_20190418_Web.pdf?v=20190418-200921&quot;&gt;https://cdn.selinc.com/assets/Literature/Publications/Technical Papers/6811_BeyondKneePoint_AH_20190418_Web.pdf?v=20190418-200921&lt;/a&gt; &lt;a href=&quot;#fnref:Hargrave&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;This assumes 1) the worst case DC offset given by the X/R ratio — in fact the offset will be determined by the closing angle of the fault and 2) a purely resistive burden. For inductive burden see C37.110-2007. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 02 Jun 2020 00:00:00 +0000</pubDate>
        <link>https://smaroukis.github.io/blog/ct-saturation</link>
        <guid isPermaLink="true">https://smaroukis.github.io/blog/ct-saturation</guid>
        
        <category>technical</category>
        
        <category>electricity</category>
        
        
        <category>engineering</category>
        
        <category>power systems</category>
        
        <category>protection</category>
        
      </item>
    
      <item>
        <title>Grounding Explained for the Masses (with Drawings!)</title>
        <description>
&lt;p&gt;So… about that third prong (or not).&lt;/p&gt;

&lt;p&gt;Have you ever wondered why some power cords have a third prong and some don’t? By popular request, today I will de-mystify the concept of Ground in household electrical systems.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note: I will only be talking about single phase secondary service connections here, or the 120/240V  service commonly delivered to residential customers. For utility grounding systems, see my next post.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#electricity-fundamentals-through-analogies&quot; id=&quot;markdown-toc-electricity-fundamentals-through-analogies&quot;&gt;Electricity Fundamentals Through Analogies&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ground-as-demonstrated-via-your-cars-electrical-system&quot; id=&quot;markdown-toc-ground-as-demonstrated-via-your-cars-electrical-system&quot;&gt;“Ground” as Demonstrated via Your Car’s Electrical System&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-three-wires-in-your-home-live-neutral-and-ground&quot; id=&quot;markdown-toc-the-three-wires-in-your-home-live-neutral-and-ground&quot;&gt;The Three Wires in Your Home: Live, Neutral, and Ground&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#the-neutral&quot; id=&quot;markdown-toc-the-neutral&quot;&gt;The Neutral&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-grounding-conductor&quot; id=&quot;markdown-toc-the-grounding-conductor&quot;&gt;The Grounding Conductor&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#the-ground-rod&quot; id=&quot;markdown-toc-the-ground-rod&quot;&gt;The Ground Rod&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#the-120240v-split-phase-service&quot; id=&quot;markdown-toc-the-120240v-split-phase-service&quot;&gt;The 120/240V “Split Phase” Service&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#further-reading&quot; id=&quot;markdown-toc-further-reading&quot;&gt;Further Reading&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#references--footnotes&quot; id=&quot;markdown-toc-references--footnotes&quot;&gt;References &amp;amp; Footnotes&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 class=&quot;no_toc&quot; id=&quot;definitions&quot;&gt;Definitions:&lt;/h2&gt;

&lt;dl&gt;
  &lt;dt&gt;&lt;strong&gt;Ground&lt;/strong&gt;&lt;/dt&gt;
  &lt;dd&gt;an intentional low impedance path connection to Earth&lt;/dd&gt;
  &lt;dt&gt;&lt;strong&gt;the ground&lt;/strong&gt;&lt;/dt&gt;
  &lt;dd&gt;the literal soil&lt;/dd&gt;
  &lt;dt&gt;&lt;strong&gt;Earth&lt;/strong&gt;&lt;/dt&gt;
  &lt;dd&gt;the Mother of all living things; also an ideal sink for electrons such that no amount of current flow into the earth will create a voltage rise; used to establish a reference voltage&lt;/dd&gt;
  &lt;dt&gt;&lt;strong&gt;Grounding conductor&lt;/strong&gt;&lt;/dt&gt;
  &lt;dd&gt;a conductive path to Ground used in the case of an equipment failure. The conductive path allows protection equipment to operate and disconnect the failed equipment. Known as EGC — equipment grounding conductor — in the National Electric Code (NEC).&lt;/dd&gt;
  &lt;dt&gt;&lt;strong&gt;neutral conductor&lt;/strong&gt;&lt;/dt&gt;
  &lt;dd&gt;a system conductor other than a phase conductor that provides a return path for current to the source. Used for single phase and line-to-neutral connected loads to provide a return path to the source.&lt;/dd&gt;
&lt;/dl&gt;

&lt;h2 id=&quot;electricity-fundamentals-through-analogies&quot;&gt;Electricity Fundamentals Through Analogies&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Electrons don’t necessarily flow; instead, energy moves through them like a travelling wave. When I talk about electrons or current “flowing” from one source to another, I’m really talking about is energy being transported by electrons bumping into one another. I won’t even mention conventional current. Now forget this and let’s move to the classic water analogy.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Think of electricity as water&lt;/strong&gt;, flowing from a high potential to a low potential. Voltage is a measure of the &lt;em&gt;force&lt;/em&gt; that the electricity has. Current is a measure of the &lt;em&gt;rate of flow&lt;/em&gt;. At the highest voltages even an insulator such as air will break down and allow charges to flow across it (lightning). At higher currents conductors melt. Higher voltages will ”push” higher currents since&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;V=IR&lt;/script&gt;

&lt;p&gt;where R is the resistance of the conductor and I is the current flowing over said resistance.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/grounding/water-analogy.png&quot; alt=&quot;water-analogy&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Notice the difference between transmission towers (the metal structures beside the highway) and distribution lines (the wooden poles outside your house). The distance between the conductors and the tower is an indication of the voltage level.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Why do we need a return path for current?&lt;/strong&gt; A circuit needs a closed loop from the power source to the load &lt;strong&gt;and back&lt;/strong&gt; for electrons to flow&lt;sup id=&quot;fnref:closed-loop&quot;&gt;&lt;a href=&quot;#fn:closed-loop&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. For single phase service, a metallic conductor called the neutral is provided as a return path for electrons.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;What is more dangerous, current or voltage? “&lt;/strong&gt;Current kills”, as the saying goes: as little as 1mA is the point at which you will let go because of pain and prolonged exposure to 20mA or more may be fatal&lt;sup id=&quot;fnref:electric-shock-data&quot;&gt;&lt;a href=&quot;#fn:electric-shock-data&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;script type=&quot;math/tex&quot;&gt;^,&lt;/script&gt;&lt;sup id=&quot;fnref:dalziel&quot;&gt;&lt;a href=&quot;#fn:dalziel&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;.  Higher voltages will push more current through you. Although there is no &lt;strong&gt;“&lt;/strong&gt;safe” voltage, Wikipedia and others mention up to 50V as being safe in normal (dry) conditions.&lt;/p&gt;

&lt;h2 id=&quot;ground-as-demonstrated-via-your-cars-electrical-system&quot;&gt;“Ground” as Demonstrated via Your Car’s Electrical System&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Batteries provide DC voltage versus the AC voltage from your wall outlet, but the concept of ground is the same&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Car batteries are 12V, so it is a safe way to experiment and learn the fundamentals. It also provides us a ready electrical system to play with.&lt;/p&gt;

&lt;p&gt;First you’ll notice your battery has a positive (+) and negative (-) terminal. The (-) terminal is connected to the chassis of the car. This provides a common point for any other negative wires — since the chassis is metal, anything attached should be electrically connected. &lt;strong&gt;The common point allows us to complete the circuit &lt;em&gt;anywhere in the car, without running a second wire back to the battery&lt;/em&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;This common point for historical reasons is called “ground” (in your home, the common point is in fact connected to ground — the actual Earth). In a car, the metal chassis is used as both the return path and the reference point. Later we will see that home electrical systems have two return paths for different purposes.&lt;/p&gt;

&lt;p&gt;If you have a 12V appliance you can connect it between the positive terminal and anywhere on the chassis and it should work. What if you connected it between the positive terminal of &lt;em&gt;your&lt;/em&gt; car and the chassis of someone &lt;em&gt;else’s&lt;/em&gt; car? Since the cars are insulated from the pavement by tires, there is no way for the circuit to be completed and the appliance won’t work. More info on car electrical systems can be found &lt;a href=&quot;https://www.howacarworks.com/basics/how-car-electrical-systems-work&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Taking this a step further, envision the whole of Earth’s soil as a common point that you could, in theory, use as a return path if both the power source and the load were connected to ground&lt;sup id=&quot;fnref:swer&quot;&gt;&lt;a href=&quot;#fn:swer&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;. In fact this is how it is used on utility power systems to trip protective devices during ground fault conditions.&lt;/p&gt;

&lt;h2 id=&quot;the-three-wires-in-your-home-live-neutral-and-ground&quot;&gt;The Three Wires in Your Home: Live, Neutral, and Ground&lt;/h2&gt;

&lt;p&gt;Starting with the most common receptacle in your wall, you’ll notice three holes. This is a &lt;a href=&quot;https://en.wikipedia.org/wiki/NEMA_connector#NEMA_5&quot;&gt;NEMA 5&lt;/a&gt; plug that has been common since the mid-twentieth century. The wider left slot connects to the neutral conductor and the right slot connects to the phase or hot wire. The U shaped is connected to the grounding conductor from which a connection to Earth is established by driving a “ground rod” into the actual ground near your main panel.&lt;/p&gt;

&lt;p&gt;If you were to look at the wiring behind the receptacle, the ground wire would have green insulation, the hot would be red or black, and the neutral would be black with a white stripe.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/grounding/nema5.png&quot; alt=&quot;nema5&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;the-neutral&quot;&gt;The Neutral&lt;/h3&gt;

&lt;p&gt;Normally current flows in from the phase conductor and back out the neutral. Both the grounding wire and the neutral wire are bonded to the ground rod at the main panel, but for different reasons. The neutral is grounded to provide a stable reference point (ideally 0 volts) and limit over-voltages on equipment during surges and lightning strikes. The grounding wire is used as an alternative (low impedance) path which completes the circuit during fault conditions.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/grounding/nema5-panel.png&quot; alt=&quot;Tracing out the connection from a standard wall outlet to the main panel. Shown above, current normally flows in from the hot (red) and back out through the neutral (black). If the appliance fails internally or the housing becomes energized, the grounding wire (green) provides a path for current to ground, resulting in currents large enough to trip the circuit breaker.&quot; /&gt;  
    &lt;figcaption&gt;Tracing out the connection from a standard wall outlet to the main panel. Shown above, current normally flows in from the hot (red) and back out through the neutral (black). If the appliance fails internally or the housing becomes energized, the grounding wire (green) provides a path for current to ground, resulting in currents large enough to trip the circuit breaker.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;the-grounding-conductor&quot;&gt;The Grounding Conductor&lt;/h3&gt;

&lt;p&gt;The ground plug is a safety measure in case the internal wiring of an appliance fails which could energize the appliance housing and cause an electrocution (the failure of the wiring and/or insulation is known as a “fault”). The appliance housing is connected internally to the ground prong which connects through the grounding wire back to the Earth at the main panel. If the applicance becomes energizes, the grounding wire diverts enough of the fault current allowing protective devices to quickly sense and de-energize the circuit.&lt;/p&gt;

&lt;p&gt;If we didn’t have this grounding wire (called the effective fault path), the electrons may eventually make their way to Ground, but the impedance could be too high for our protective devices to sense the current.&lt;/p&gt;

&lt;p&gt;Any metallic structure that could become accidentally energized will also be grounded for this reason.&lt;/p&gt;

&lt;p&gt;Not all appliances require grounding, like when the 120V AC is converted to usable DC voltage right next to the outlet (phone chargers). Other appliances have extra insulation that would prevent the casing or wiring from being exposed.&lt;/p&gt;

&lt;p&gt;A special type of receptacle located in kitchens and bathrooms is the GFCI (“ground fault current interrupting”) outlet. These work on the principle that the current flowing on the “hot” wire should be equal and opposite the current flowing on the neutral. If any current unbalance is sensed, the receptacle immediately de-energizes the circuit.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/grounding/gfci.png&quot; alt=&quot;A hot wire connected to water will cause a current to flow through the water and into the soil instead of back through the neutral. The GFCI outlet works on the principle that current on the hot must be equal to current on the neutral, else the current is undesirably flowing somewhere else (through a person maybe?). This device senses even micro-amps of current imbalance and immediately de-energizes the circuit.&quot; /&gt;  
    &lt;figcaption&gt;A hot wire connected to water will cause a current to flow through the water and into the soil instead of back through the neutral. The GFCI outlet works on the principle that current on the hot must be equal to current on the neutral, else the current is undesirably flowing somewhere else (through a person maybe?). This device senses even micro-amps of current imbalance and immediately de-energizes the circuit.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;the-ground-rod&quot;&gt;The Ground Rod&lt;/h3&gt;

&lt;p&gt;The ground rod at the main panel is the connection to Mother Earth (sustenance of all life forms), providing&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;a return path to dissipate fault currents&lt;/li&gt;
  &lt;li&gt;an infinite sink for lightning strikes and voltage surges, which protects equipment and human beings from dangerous voltages&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The ground rod is also known as the grounding electrode. Installations try to minimize the soil-to-electrode impedance which is the main determining factor in the quality of Ground.&lt;/p&gt;

&lt;p&gt;Without proper Grounding, fault current will find its own path to Earth (an infinite sink for electrons), potentially damaging equipment and creating dangerous touch voltages.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/grounding/ground-rod.png&quot; alt=&quot;The more contact with the soil, the lower the impedance. The contact resistance between the rod and soil is high but due to the almost infinite number of parallel paths the Earth itself has a very low resistance. The impedance can be thought of as being contained within a few ''spheres of influence'' after a point which additional distance from the electrode adds no more appreciable impedance. Ground rods are usually driven at least 8 ft into the ground. &quot; /&gt;  
    &lt;figcaption&gt;The more contact with the soil, the lower the impedance. The contact resistance between the rod and soil is high but due to the almost infinite number of parallel paths the Earth itself has a very low resistance. The impedance can be thought of as being contained within a few ''spheres of influence'' after a point which additional distance from the electrode adds no more appreciable impedance. Ground rods are usually driven at least 8 ft into the ground. &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;the-120240v-split-phase-service&quot;&gt;The 120/240V “Split Phase” Service&lt;/h2&gt;

&lt;p&gt;If we trace our electrical system back to the transformer, we should find two hots and a neutral. This is because the transformer bushing-to-bushing secondary is 240V, and a connection to the middle of the secondary winding gives us half, or 120V. So we have three connections we can make: L1-N is 120V. L2-N is 120V. and L1-L2 is 240V. The 240V service is used for heavier duty equipment such as dryers, water heaters and stoves, and has a different NEMA plug as well.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/grounding/split-phase-service.png&quot; alt=&quot;split-phase-service&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If we go back further to the lines on the utility poles, we see that our transformers is only on two out of three or four lines on the primary distribution system. This system is three phase and has its roots in the three rotating magnetic fields of large generators.&lt;/p&gt;

&lt;h2 id=&quot;further-reading&quot;&gt;Further Reading&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mikeholt.com/instructor2/img/product/pdf/1292448885sample.pdf&quot;&gt;Mike Holt&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://physics.stackexchange.com/questions/71383/does-current-flow-back-to-the-source-through-earth&quot;&gt;Does current flow back to the source through Earth?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;references--footnotes&quot;&gt;References &amp;amp; Footnotes&lt;/h2&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:closed-loop&quot;&gt;
      &lt;p&gt;Generally, due to displacement currents and capacitance, a physically closed loop with a metallic conductor is &lt;strong&gt;not&lt;/strong&gt; required, but I’ll let the physicists &lt;a href=&quot;https://physics.stackexchange.com/questions/74625/does-alternating-current-ac-require-a-complete-circuit/74999#74999&quot;&gt;prove that one&lt;/a&gt;. &lt;a href=&quot;#fnref:closed-loop&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:electric-shock-data&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.allaboutcircuits.com/textbook/direct-current/chpt-3/electric-shock-data/&quot;&gt;https://www.allaboutcircuits.com/textbook/direct-current/chpt-3/electric-shock-data/&lt;/a&gt; &lt;a href=&quot;#fnref:electric-shock-data&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:dalziel&quot;&gt;
      &lt;p&gt;Charles F. Dalziel, “Dangerous Electric Currents”, AIEE Transactions, August – September 1946, Vol. 65, pp. 579 – 585. &lt;a href=&quot;http://sci-hub.tw/10.1109/T-AIEE.1946.5059386&quot;&gt;sci-hub.tw/10.1109/T-AIEE.1946.5059386&lt;/a&gt; &lt;a href=&quot;#fnref:dalziel&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:swer&quot;&gt;
      &lt;p&gt;This is actually done in rare cases to run a single wire out to rural customers, but is not allowed in most U.S. standards, see &lt;a href=&quot;https://en.wikipedia.org/wiki/Single-wire_earth_return#Safety&quot;&gt;https://en.wikipedia.org/wiki/Single-wire_earth_return&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://www.cpuc.ca.gov/gos/GO95/go_95_rule_33_2.html&quot;&gt;GO-95 Rule 33.2&lt;/a&gt; &lt;a href=&quot;#fnref:swer&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Mon, 11 May 2020 00:00:00 +0000</pubDate>
        <link>https://smaroukis.github.io/blog/grounding-for-everyone</link>
        <guid isPermaLink="true">https://smaroukis.github.io/blog/grounding-for-everyone</guid>
        
        <category>electricity</category>
        
        
        <category>engineering</category>
        
        <category>power systems</category>
        
        <category>grounding</category>
        
      </item>
    
      <item>
        <title>How to Customize Jekyll Using GitHub Pages, Docker, and Travis</title>
        <description>&lt;p&gt;Check out the &lt;a href=&quot;/blog/how-to-guide-jekyll-docker-travis-github&quot;&gt;source&lt;/a&gt; for this blog post!&lt;/p&gt;

&lt;p&gt;This post is for:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;1) someone who wants to use custom Jekyll plugins but still host on GitHub pages&lt;/li&gt;
  &lt;li&gt;2) a technologically savvy user who wants to start a blog spend and likes to spend time on the command line (and doesn’t want to &lt;a href=&quot;https://jekyllrb.com/docs/&quot;&gt;read the docs&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;3) someone who already has a Jekyll blog but wants to extend their theme’s functionality (and doesn’t want to &lt;a href=&quot;https://jekyllrb.com/docs/&quot;&gt;read the docs&lt;/a&gt;)
    &lt;blockquote&gt;
      &lt;p&gt;For (2) you may already have built a ruby project and thus are more ruby-savvy than me. Then you won’t need docker and you probably have your own deployment workflow. But you need to know more about how Jekyll is building and serving files, what to include and exclude in your configurations, how to use Liquid tags and where to put your custom javascript. For (3) maybe you have been using Jekyll for a few months but want to develop a more fundamental understanding of what is going on behind the scenes. This is where I was a few months ago after I hadn’t blogged for a year, I looked at my repo and realized that I didn’t know what was going on.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;What I’m Using:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jekyllrb.com&quot;&gt;Jekyll&lt;/a&gt; version 3.8&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://pages.github.com&quot;&gt;GitHub Pages&lt;/a&gt; to &lt;em&gt;host&lt;/em&gt; the website but &lt;strong&gt;not&lt;/strong&gt; to build it&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.docker.com&quot;&gt;Docker&lt;/a&gt; to &lt;strong&gt;build locally&lt;/strong&gt; and to &lt;strong&gt;build in a Travis instance&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://travis-ci.org&quot;&gt;Travis&lt;/a&gt; to deploy the static site to the &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt; branch of my GitHub repository&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://katex.org&quot;&gt;Katex&lt;/a&gt; for displaying Maths &lt;em&gt;whilst using &lt;a href=&quot;https://kramdown.gettalong.org/index.html&quot;&gt;kramdown&lt;/a&gt;&lt;/em&gt;, the default markdown converter in Jekyll&lt;/li&gt;
  &lt;li&gt;Others: Plotly for graphs, Mapbox and Leaflet for maps.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 class=&quot;no_toc&quot; id=&quot;table-of-contents&quot;&gt;Table of Contents&lt;/h2&gt;
&lt;ol id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#getting-started&quot; id=&quot;markdown-toc-getting-started&quot;&gt;Getting Started&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#basic-knowledge-ruby-and-bundler&quot; id=&quot;markdown-toc-basic-knowledge-ruby-and-bundler&quot;&gt;Basic Knowledge, Ruby and Bundler&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#local-dependencies&quot; id=&quot;markdown-toc-local-dependencies&quot;&gt;Local Dependencies&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#building-your-site-from-scratch&quot; id=&quot;markdown-toc-building-your-site-from-scratch&quot;&gt;Building Your Site From Scratch&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#custom-configuration&quot; id=&quot;markdown-toc-custom-configuration&quot;&gt;Custom Configuration&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#changing-themes&quot; id=&quot;markdown-toc-changing-themes&quot;&gt;Changing Themes&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#extending-themes&quot; id=&quot;markdown-toc-extending-themes&quot;&gt;Extending Themes&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#editing-_configyml&quot; id=&quot;markdown-toc-editing-_configyml&quot;&gt;Editing _config.yml&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#setting-up-our-blogging-workflow&quot; id=&quot;markdown-toc-setting-up-our-blogging-workflow&quot;&gt;Setting Up Our Blogging Workflow&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#serving-via-docker-compose&quot; id=&quot;markdown-toc-serving-via-docker-compose&quot;&gt;Serving Via &lt;em&gt;Docker Compose&lt;/em&gt;&lt;/a&gt;        &lt;ol&gt;
          &lt;li&gt;&lt;a href=&quot;#other-docker-commands&quot; id=&quot;markdown-toc-other-docker-commands&quot;&gt;Other Docker Commands&lt;/a&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#aside-how-github-pages-builds-jekyll-in-safe-mode&quot; id=&quot;markdown-toc-aside-how-github-pages-builds-jekyll-in-safe-mode&quot;&gt;Aside: How GitHub Pages Builds Jekyll in –Safe Mode&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#aside-how-to-override-the-github-pages-safe-build&quot; id=&quot;markdown-toc-aside-how-to-override-the-github-pages-safe-build&quot;&gt;Aside: How to Override the GitHub Pages –Safe Build&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#commiting-local-edits-to-a-source-branch&quot; id=&quot;markdown-toc-commiting-local-edits-to-a-source-branch&quot;&gt;Commiting Local Edits to a Source Branch&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#setting-up-travis&quot; id=&quot;markdown-toc-setting-up-travis&quot;&gt;Setting Up Travis&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#wrapping-up&quot; id=&quot;markdown-toc-wrapping-up&quot;&gt;Wrapping Up&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#how-are-maths-displayed&quot; id=&quot;markdown-toc-how-are-maths-displayed&quot;&gt;How are Maths Displayed?&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#displaying-captions-under-images-in-leonids&quot; id=&quot;markdown-toc-displaying-captions-under-images-in-leonids&quot;&gt;Displaying Captions Under Images in Leonids&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#improvements-and-feedback&quot; id=&quot;markdown-toc-improvements-and-feedback&quot;&gt;Improvements and Feedback&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#resources&quot; id=&quot;markdown-toc-resources&quot;&gt;Resources&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#footnotes&quot; id=&quot;markdown-toc-footnotes&quot;&gt;Footnotes&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;getting-started&quot;&gt;Getting Started&lt;/h2&gt;

&lt;h3 id=&quot;basic-knowledge-ruby-and-bundler&quot;&gt;Basic Knowledge, Ruby and Bundler&lt;/h3&gt;
&lt;p&gt;Some basic knowledge of the command line, Jekyll, bash, docker, and git will be useful. You may want to read through Jekyll’s &lt;a href=&quot;https://jekyllrb.com/docs/&quot;&gt;quick start guide&lt;/a&gt; to see what is being installed and used locally like &lt;code class=&quot;highlighter-rouge&quot;&gt;ruby&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Bundler&lt;/code&gt;. The &lt;strong&gt;TL;DR&lt;/strong&gt; is that &lt;code class=&quot;highlighter-rouge&quot;&gt;ruby&lt;/code&gt; is a programming languagage whose libraries are packaged in &lt;code class=&quot;highlighter-rouge&quot;&gt;gems&lt;/code&gt;. &lt;code class=&quot;highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; manages the gems using the versions found in a local &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;, installing the specified version of various gems and their dependencies. The &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; is stored in the root directory of the project and the gems are downloaded and stored by &lt;code class=&quot;highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; somewhere like &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bundle&lt;/code&gt;. See &lt;a href=&quot;https://stackoverflow.com/questions/15586216/bundler-vs-rvm-vs-gems-vs-rubygems-vs-gemsets-vs-system-ruby&quot;&gt;this stack overflow answer&lt;/a&gt; for more detail.&lt;/p&gt;

&lt;p&gt;I’ll also point out some Windows traps, demonstrate my git workflow, and give you some ideas on how to extend your theme’s layouts.&lt;/p&gt;

&lt;h3 id=&quot;local-dependencies&quot;&gt;Local Dependencies&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://git-scm.com/download/&quot;&gt;git&lt;/a&gt; - also on Windows it is nice to use the git-bash shell that comes with git&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.docker.com/get-docker/&quot;&gt;docker&lt;/a&gt; and, for Linux, &lt;a href=&quot;https://docs.docker.com/compose/install/&quot;&gt;docker-compose&lt;/a&gt; (docker-compose is included with the Docker-Desktop installation on Windows and Mac OS)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Since we are using the official jekyll docker image, the only thing we need to install locally is docker and git (for Windows and bare-bones Linux distributions). This makes it easy to use different computers and not worry about local dependencies. Here’s an overview of how we’re managing the ruby and gem dependencies, starting with the ones we explicitly state:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Jekyll&lt;/strong&gt;: (explicit) The version is determined mainly by our &lt;strong&gt;Gemfile&lt;/strong&gt; (&lt;code class=&quot;highlighter-rouge&quot;&gt;gem &quot;jekyll&quot;, &quot;~&amp;gt; 3.8&quot;&lt;/code&gt;)&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. We should also make sure to match the docker image jekyll version as specified in our &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; or from the command line (e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll/jekyll:3.8&lt;/code&gt; for version 3.8)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Theme and Other Plugins&lt;/strong&gt;: Either as explicitly specified in the &lt;strong&gt;Gemfile&lt;/strong&gt;, or implicitly depending on the version of Jekyll and other dependent gems&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Katex&lt;/strong&gt; or &lt;strong&gt;MathJax&lt;/strong&gt;: (explicit) Defined where you put your javascript, mine is in a file under my &lt;code class=&quot;highlighter-rouge&quot;&gt;_includes&lt;/code&gt; folder&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Ruby&lt;/strong&gt;: (implicit) The ruby version is handeled by the jekyll/jekyll docker image (as of writing it was using 2.6.3)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;building-your-site-from-scratch&quot;&gt;Building Your Site From Scratch&lt;/h3&gt;

&lt;p&gt;First you will either build a new site from scratch or pull one down from a repo. Generally to build a new site you run &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll new &amp;lt;sitename&amp;gt;&lt;/code&gt; to pull down the jekyll source files into the &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;sitename&amp;gt;&lt;/code&gt; directory. Then you go into this directory and run &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt; which will both build the site and serve it locally on port 4000 by default. If you didn’t want to serve the site but instead just build the static html files you would do &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll build&lt;/code&gt;. But since we don’t have Ruby, Jekyll, or Bundler locally we use a docker container for all of these.&lt;/p&gt;

&lt;p&gt;The docker commands are as follows (you may need &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo&lt;/code&gt; for &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run&lt;/code&gt;):&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JEKYLL_VERSION&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;3.8
docker run &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;:/srv/jekyll jekyll/jekyll:&lt;span class=&quot;nv&quot;&gt;$JEKYLL_VERSION&lt;/span&gt; jekyll new &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note I will be using Jekyll 3.8 throughout, so anytime you see this change it to the version you are working with.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This does the following:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Mounts our &lt;strong&gt;current host directory&lt;/strong&gt;&lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; (&lt;code class=&quot;highlighter-rouge&quot;&gt;$(pwd)&lt;/code&gt;) to the container’s &lt;code class=&quot;highlighter-rouge&quot;&gt;/srv/jekyll&lt;/code&gt; (the docker image has specific priveleges to run jekyll commands in this location). Anything created by the container in &lt;code class=&quot;highlighter-rouge&quot;&gt;/srv/jekyll&lt;/code&gt; will show up in our host’s current directory, which should be our blog’s project directory&lt;/li&gt;
  &lt;li&gt;Uses the &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll/jekyll:3.8&lt;/code&gt; image to &lt;strong&gt;initialize a jekyll site&lt;/strong&gt; in &lt;code class=&quot;highlighter-rouge&quot;&gt;/srv/jekyll&lt;/code&gt;, which will also appear in our current host directory (see #1). This consists of the bare bones files that Jekyll needs to build a site, notably a &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; and a Markdown entry under the &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory. If you look closely there is also a hidden &lt;code class=&quot;highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt; file created.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The directory structure should now be&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
├── 404.html
├── about.markdown
├── _config.yml
├── Gemfile
├── index.markdown
├── _posts
    └── 2020-04-18-welcome-to-jekyll.markdown
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We actually don’t have a site yet, we just have the source files that jekyll will build one with. Let’s do that now in docker.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 4000:4000 &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;:/srv/jekyll jekyll/jekyll:&lt;span class=&quot;nv&quot;&gt;$JEKYLL_VERSION&lt;/span&gt; jekyll serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We have added the &lt;code class=&quot;highlighter-rouge&quot;&gt;-it&lt;/code&gt; command to run it interactively and the &lt;code class=&quot;highlighter-rouge&quot;&gt;-p&lt;/code&gt; command to forward port 4000 on the container to port 4000 on the host. Navigate to &lt;a href=&quot;http://localhost:4000&quot;&gt;http://localhost:4000&lt;/a&gt; to see the website. The directory should now have a new directory &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; in addition to the source files which are left untouched.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;_site
├── 404.html
├── about
│   └── index.html
├── assets
│   ├── main.css
│   ├── main.css.map
│   └── minima-social-icons.svg
├── feed.xml
├── index.html
└── jekyll
    └── update
        └── 2020
            └── 04
                └── 19
                    └── welcome-to-jekyll.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;A &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile.lock&lt;/code&gt; file will also have been created in the root directory. This is a list of all of the gems installed by &lt;code class=&quot;highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; at run time, including the exact versions and any dependencies not declared in the &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;. Note that both the &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; and the &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile.lock&lt;/code&gt; should both be checked in to our GitHub repo.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You can see that all the static files needed for displaying a website are under &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; and the rest of the source files are unchanged. In fact Jekyll will copy any of the source files into the &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; directory unless they are excluded in the configuration file (Gemfiles, Markdown, and files beginning with &lt;code class=&quot;highlighter-rouge&quot;&gt;_&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;.&lt;/code&gt; are excluded by default). Further, if any files have YAML front matter, these files will be “processed” by Jekyll.&lt;/p&gt;

&lt;p&gt;One last point – the path to the actual blog posts in html depends on how the permalink and categories are set up in the configuration file, which we’ll look at next.&lt;/p&gt;

&lt;h2 id=&quot;custom-configuration&quot;&gt;Custom Configuration&lt;/h2&gt;

&lt;h3 id=&quot;changing-themes&quot;&gt;Changing Themes&lt;/h3&gt;
&lt;p&gt;A list of theme showcases can be found at &lt;a href=&quot;https://jekyllrb.com/docs/themes/&quot;&gt;https://jekyllrb.com/docs/themes/&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note any incompatibility between the Jekyll version and the theme of choice. Some themes have not been updated to support Jekyll 4.0.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Generally you’ll want to check the theme’s documentation on how to download a theme. In theory, for themes with gems, you can just add the gem to your gemfile and update the configuration file. Some themes require specific structure that is better mimicked from downloading the source files yourself.&lt;/p&gt;

&lt;p&gt;In our case, let’s try the &lt;a href=&quot;https://mmistakes.github.io/jekyll-theme-basically-basic&quot;&gt;&lt;strong&gt;Basically Basic&lt;/strong&gt;&lt;/a&gt; theme which is a good out-of-the-box replacement for Jekyll’s default Minima theme. It also has &lt;a href=&quot;https://github.com/mmistakes/jekyll-theme-basically-basic&quot;&gt;great documentation&lt;/a&gt; to explore and give you ideas on how to extend whatever theme you’re using.&lt;/p&gt;

&lt;p&gt;Update &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; with the theme’s gem&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;gem &quot;jekyll-theme-basically-basic&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Update &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;jekyll-theme-basically-basic&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are still in the interactive shell from the first &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt;, kill it with &lt;code class=&quot;highlighter-rouge&quot;&gt;ctrl + C&lt;/code&gt;. Then &lt;strong&gt;serve&lt;/strong&gt; the site with the same &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run ... jekyll serve&lt;/code&gt; command as before.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 4000:4000 &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;:/srv/jekyll jekyll/jekyll:&lt;span class=&quot;nv&quot;&gt;$JEKYLL_VERSION&lt;/span&gt; jekyll serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;extending-themes&quot;&gt;Extending Themes&lt;/h3&gt;
&lt;p&gt;There are more source files actually stored within the gem that Bundler downloads. These are folders such as &lt;code class=&quot;highlighter-rouge&quot;&gt;assets&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;_includes&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;_layouts&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;_sass&lt;/code&gt; that are called upon when Jekyll builds the site. Any local files with the same nomenclature as the theme’s gem will override that file, allowing you to customize themes. For example, this allows us to use insert javascript that will render &lt;script type=&quot;math/tex&quot;&gt;\LaTeX&lt;/script&gt; for math posts. See &lt;a href=&quot;https://jekyllrb.com/docs/themes/#overriding-theme-defaults&quot;&gt;the docs&lt;/a&gt; for more.&lt;/p&gt;

&lt;h3 id=&quot;editing-_configyml&quot;&gt;Editing _config.yml&lt;/h3&gt;
&lt;p&gt;Some other things you may want to change are:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;url&lt;/code&gt;: the hostname and protocol for you site. If you’re hosting on GitHub pages it will be &lt;code class=&quot;highlighter-rouge&quot;&gt;https://&amp;lt;username&amp;gt;.github.io&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;permalink&lt;/code&gt;: the path to your posts online, e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;/blog/:title&lt;/code&gt;. See the &lt;a href=&quot;https://jekyllrb.com/docs/permalinks/#placeholders&quot;&gt;docs&lt;/a&gt; for other placeholders like year, month, and day. Note that you can also add a permalink for an individual post in the YAML front matter of that post.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;exclude&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;include&lt;/code&gt;: for Jekyll &lt;code class=&quot;highlighter-rouge&quot;&gt;build&lt;/code&gt;
    &lt;ul&gt;
      &lt;li&gt;If we want to build the site ourselves instead of GitHub Pages, we include a &lt;code class=&quot;highlighter-rouge&quot;&gt;.nojekyll&lt;/code&gt; empty file, since hidden files are excluded by default and we want this file to propogate to our &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; folder so that it is there when we push it to GitHub.&lt;/li&gt;
      &lt;li&gt;Other files that we need in our source but not our site should be excluded or prepended with &lt;code class=&quot;highlighter-rouge&quot;&gt;.&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;_&lt;/code&gt;.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;anything else that you or your theme has chosen to define. These are available via liquid tags as &lt;code class=&quot;highlighter-rouge&quot;&gt;{{ site.&amp;lt;variable&amp;gt; }}&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;setting-up-our-blogging-workflow&quot;&gt;Setting Up Our Blogging Workflow&lt;/h2&gt;
&lt;p&gt;Here are the highlights:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Create and edit the Markdown files under your &lt;code class=&quot;highlighter-rouge&quot;&gt;_posts&lt;/code&gt; directory (note the specific naming structure of the files as &lt;code class=&quot;highlighter-rouge&quot;&gt;YYYY-MM-DD-title-goes-here.md&lt;/code&gt;)&lt;/li&gt;
  &lt;li&gt;Easily serve the local website via container with &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose up&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Commit/Push edits to a &lt;code class=&quot;highlighter-rouge&quot;&gt;source&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;release&lt;/code&gt; branch
    &lt;ul&gt;
      &lt;li&gt;Anything under &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; should be ignored by git (if not add &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; to your &lt;code class=&quot;highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt;), which is necessary since you will have conflicts between building and serving, since &lt;code class=&quot;highlighter-rouge&quot;&gt;build&lt;/code&gt; will use the actual &lt;code class=&quot;highlighter-rouge&quot;&gt;url&lt;/code&gt; defined in &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;serve&lt;/code&gt; will build the site to &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:4000&lt;/code&gt;.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Build the site and push only the contents of &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; to the &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt; branch, which GitHub will host automatically.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;serving-via-docker-compose&quot;&gt;Serving Via &lt;em&gt;Docker Compose&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Docker-Compose is normally used to spin up a fleet of containers, but I use it as a convenient short-hand way to use local development flags across multiple development environments. Of course you could write a simple shell script to do the same thing if you only use the same OS all the time.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;On Windows things are a bit wonky. You’ll have to create an extra &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; file so that you can use &lt;code class=&quot;highlighter-rouge&quot;&gt;url=localhost&lt;/code&gt; instead of the default &lt;code class=&quot;highlighter-rouge&quot;&gt;0.0.0.0&lt;/code&gt; that &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll serve&lt;/code&gt; will do. &lt;a href=&quot;https://tonyho.net/jekyll-docker-windows-and-0-0-0-0/&quot;&gt;This blog post&lt;/a&gt; lays it all out.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To quickly serve the website we create the following file named &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose.yml&lt;/code&gt; (install &lt;a href=&quot;https://docs.docker.com/get-docker/&quot;&gt;docker&lt;/a&gt; and &lt;a href=&quot;https://docs.docker.com/compose/install/&quot;&gt;docker-compose&lt;/a&gt; as needed):&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# ./docker-compose.yml&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;3.7'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# docker compose version&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;JEKYLL_ENV=local&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;jekyll serve --drafts --incremental --force_polling --watch&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;jekyll/jekyll:3.8&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;.:/srv/jekyll&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;4000:4000&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note this will &lt;strong&gt;only be used to preview the site locally&lt;/strong&gt;. If we are building the site ourselves locally we cannot serve it at the same time, since Jekyll has specific overrides for the &lt;code class=&quot;highlighter-rouge&quot;&gt;serve&lt;/code&gt; command (such as the url).&lt;/p&gt;

&lt;p&gt;Since we are only using it locally we can add it to our &lt;code class=&quot;highlighter-rouge&quot;&gt;.gitignore&lt;/code&gt; file. Since it does not begin with &lt;code class=&quot;highlighter-rouge&quot;&gt;.&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;_&lt;/code&gt; we also need to exclude it in our &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; file or else it will be copied into the &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; folder when built.&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# _config.yml&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;docker-compose.yml&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then to run this in the background as we edit our posts we run:&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker-compose up &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with the detached &lt;code class=&quot;highlighter-rouge&quot;&gt;-d&lt;/code&gt; flag to detach it from a shell.&lt;/p&gt;

&lt;h4 id=&quot;other-docker-commands&quot;&gt;Other Docker Commands&lt;/h4&gt;
&lt;p&gt;Use &lt;code class=&quot;highlighter-rouge&quot;&gt;docker ps&lt;/code&gt; to list running containers and &lt;code class=&quot;highlighter-rouge&quot;&gt;docker ps -a&lt;/code&gt; to list all containers. Use &lt;code class=&quot;highlighter-rouge&quot;&gt;docker image ls&lt;/code&gt; to list docker images.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Executing commands in the container&lt;/strong&gt;: You have an existing container that you want to run something like  &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle update&lt;/code&gt; in&lt;sup id=&quot;fnref:3&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;, but you don’t want to start a new container from the &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll/jekyll&lt;/code&gt; image which would cause all of the gems to be downloaded again&lt;sup id=&quot;fnref:4&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;. Get the container name from &lt;code class=&quot;highlighter-rouge&quot;&gt;docker ps&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;docker-compose ps&lt;/code&gt; (the container has to be active) and run the following:&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &amp;lt;container_name&amp;gt; bundle update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To get a shell in the container run&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &amp;lt;container_name&amp;gt; /bin/sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Stopping a Container&lt;/strong&gt;: If you served the Jekyll site in detached mode (&lt;code class=&quot;highlighter-rouge&quot;&gt;-d&lt;/code&gt;) and you want to stop the server so that port 4000 is available for something else.&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker &lt;span class=&quot;nb&quot;&gt;kill&lt;/span&gt; &amp;lt;container_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Restarting a Container&lt;/strong&gt;: You want to re-serve the Jekyll site, which means you need to restart the docker container (assuming the container still exists)&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker restart &amp;lt;container_name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Removing Unused Containers&lt;/strong&gt;: Any containers run without the &lt;code class=&quot;highlighter-rouge&quot;&gt;--rm&lt;/code&gt; option will still be available. To delete all stopped containers use&lt;/p&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker system prune
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;aside-how-github-pages-builds-jekyll-in-safe-mode&quot;&gt;Aside: How GitHub Pages Builds Jekyll in –Safe Mode&lt;/h3&gt;
&lt;p&gt;Ok so now you have a full fledged Jekyll site locally with source files in the root of the project and all the static files necessary to serve the site in the &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; folder.&lt;/p&gt;

&lt;p&gt;If you wanted just to quickly see this site on the real internet you could simply try to push everything to the &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt; branch on your &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;username&amp;gt;.github.io&lt;/code&gt; repo. What would happen? Likely GitHub pages would see that you have Jekyll source files and try to build and serve your site.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;In your User repo go to &lt;strong&gt;Settings &amp;gt; Options &amp;gt; Scroll Down to GitHub Pages&lt;/strong&gt;. Here we can see that GitHub Pages is building the Jekyll site from the &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt; branch. Note that for User pages (&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;username&amp;gt;.github.io&lt;/code&gt;) this is the only option. For Project pages, people often change this to &lt;code class=&quot;highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt;. 
&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/gh-pages-source.png&quot; alt=&quot;GitHub Settings &amp;gt; Options &amp;gt; GitHub Pages&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;If you navigate to the &lt;strong&gt;Environments&lt;/strong&gt; page on your repo you should see the GitHub Pages deployed your site
&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/gh-environ.png&quot; alt=&quot;GitHub Environments on your repo&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;The Activity Log shows the history of deployments. Clicking on &lt;strong&gt;View Deployment&lt;/strong&gt; shows you the current site.
&lt;img src=&quot;https://smaroukis.github.io/assets/img/2020/gh-activity-log.png&quot; alt=&quot;GitHub Activity Log&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;If the GitHub pages &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll build&lt;/code&gt; fails or if you are using an unsupported theme you will receive an email from GitHub pages support.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;So, what is going on here? Well behind the scenes GitHub pages is using &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll build --safe&lt;/code&gt; to disable custom plugins and has the following configurations (&lt;a href=&quot;https://help.github.com/en/github/working-with-github-pages/about-github-pages-and-jekyll#configuring-jekyll-in-your-github-pages-site&quot;&gt;source&lt;/a&gt; and &lt;a href=&quot;https://jekyllrb.com/docs/github-pages/&quot;&gt;Jekyll docs&lt;/a&gt;):&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;lsi&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;safe&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;your repo's top level directory&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;incremental&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;highlighter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;rouge&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;gist&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;noscript&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kramdown&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;math_engine&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mathjax&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;syntax_highlighter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;rouge&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you wanted to build this locally you would use a different Gemfile than we’ve made:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# GH Pages Local Gemfile Example
source 'https://rubygems.org'
gem 'github-pages', group: :jekyll_plugins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A few things to note here. We are forced into &lt;code class=&quot;highlighter-rouge&quot;&gt;kramdown&lt;/code&gt; for markup, &lt;code class=&quot;highlighter-rouge&quot;&gt;mathjax&lt;/code&gt; for maths, and &lt;code class=&quot;highlighter-rouge&quot;&gt;rouge&lt;/code&gt; for syntax highlighting. This is important later on because even if we specify something different, when we deploy to &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt; these are what is being used. {:.notice}&lt;/p&gt;

&lt;h3 id=&quot;aside-how-to-override-the-github-pages-safe-build&quot;&gt;Aside: How to Override the GitHub Pages –Safe Build&lt;/h3&gt;

&lt;p&gt;There are a few special setups to tell GitHub that we &lt;strong&gt;don’t&lt;/strong&gt; want them to build the site. First, instead of deploying to master the Jekyll source files, we deploy &lt;strong&gt;only the built static files&lt;/strong&gt;, the contents of &lt;em&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt;&lt;/em&gt;. Second we add an empty file named &lt;code class=&quot;highlighter-rouge&quot;&gt;.nojekyll&lt;/code&gt; so that Pages knows not to run jekyll build.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.nojekyll
404.html
about
└── index.html
assets
├── main.css
├── main.css.map
└── minima-social-icons.svg
feed.xml
index.html
jekyll
└── update
    └── 2020
        └── 04
            └── 19
                └── welcome-to-jekyll.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since Jekyll will overwrite whatever is in &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; upon building, we create the &lt;code class=&quot;highlighter-rouge&quot;&gt;.nojekyll&lt;/code&gt; file in the &lt;strong&gt;root&lt;/strong&gt; directory and add &lt;code class=&quot;highlighter-rouge&quot;&gt;include: [.nojekyll]&lt;/code&gt; into our &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; so that this file propogates into the build destination.&lt;/p&gt;

&lt;h3 id=&quot;commiting-local-edits-to-a-source-branch&quot;&gt;Commiting Local Edits to a Source Branch&lt;/h3&gt;

&lt;p&gt;So now we understand what is going on behind the scenes with the &lt;em&gt;Asides&lt;/em&gt; above. This allows us to develop blog posts in a source or release branch seperately from the static files that GitHub will host. We can either build the static files ourselves or, better yet, when we push to a release branch we can have a continuous deployment tool (like Travis or Jenkins) build and push the static files to the &lt;code class=&quot;highlighter-rouge&quot;&gt;master&lt;/code&gt; branch on GitHub.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Note: I named my release branch &lt;code class=&quot;highlighter-rouge&quot;&gt;master-source&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git checkout master-source&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Make edits yada yada&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git add&lt;/code&gt; stuff and &lt;code class=&quot;highlighter-rouge&quot;&gt;git commit -m 'this blog is getting really long'&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git push --set-upstream origin master-source&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Note that we really don’t want to make edits on the &lt;code class=&quot;highlighter-rouge&quot;&gt;master-source&lt;/code&gt; branch, so we would really checkout a different branch, merge those changes into &lt;code class=&quot;highlighter-rouge&quot;&gt;master-source&lt;/code&gt; and then push to the remote.&lt;/p&gt;

&lt;h3 id=&quot;setting-up-travis&quot;&gt;Setting Up Travis&lt;/h3&gt;

&lt;p&gt;To setup or continuous integration (CI) tool we need to tell them what branch to watch for changes on, what docker command to run, and what branch and files to push the built site to. There are some good Travis + Jekyll + GitHub Pages how-to’s like &lt;a href=&quot;https://medium.com/@mcred/supercharge-github-pages-with-jekyll-and-travis-ci-699bc0bde075&quot;&gt;this one&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# ./.travis.yml&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# we will use the ruby of the docker container&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;linux&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;dist&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;bionic&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;before_install&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;docker pull jekyll/jekyll:3.8&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;only&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;master-source&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# safelist to only build this branch; edit this to your release or source branch&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; 
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;docker run --rm -it -v=&quot;$PWD:/srv/jekyll&quot; jekyll/jekyll:3.8 jekyll build&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;deploy&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;provider&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pages&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;local_dir&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;_site/&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# only deploy the contents of _site to the master branch&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;skip_cleanup&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;target-branch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;master&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# where you want to deploy the build to&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$GITHUB_TOKEN&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# set this up in your travis profile&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;git&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;keep_history&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;master-source&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# deploy only from the source branch&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;notifications&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;recipients&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;smaroukis@gmail.com&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# I hope there are no bots scraping this webpage for email addresses&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;on_success&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;always&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;on_failure&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;always&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A few things to note&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;script&lt;/code&gt;: This is the main command we are using to build the site with Travis/Docker instead of GitHub Pages. Since we are using &lt;code class=&quot;highlighter-rouge&quot;&gt;jekyll build&lt;/code&gt; by default we are using &lt;code class=&quot;highlighter-rouge&quot;&gt;JEKYLL_ENV=production&lt;/code&gt; and the other matter specified in the &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;only: master-source&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;branch: master-source&lt;/code&gt;: Replace &lt;code class=&quot;highlighter-rouge&quot;&gt;master-source&lt;/code&gt; with the name of your source/release branch.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;local_dir: _site/&lt;/code&gt;: Tells Travis to only deploy the &lt;em&gt;contents&lt;/em&gt; of &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;target-branch: master&lt;/code&gt;: Where you want to deploy the the built files to. This should be the same as in your GitHub repo’s &lt;strong&gt;Settings &amp;gt; Options &amp;gt; GitHub Pages &amp;gt; Source&lt;/strong&gt; points to.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;language: python&lt;/code&gt;: We are using a &lt;code class=&quot;highlighter-rouge&quot;&gt;python&lt;/code&gt; travis instance to show that we are only using the ruby version of the docker container. It is also faster than a &lt;code class=&quot;highlighter-rouge&quot;&gt;ruby&lt;/code&gt; instance&lt;sup id=&quot;fnref:5&quot;&gt;&lt;a href=&quot;#fn:5&quot; class=&quot;footnote&quot;&gt;5&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;wrapping-up&quot;&gt;Wrapping Up&lt;/h1&gt;

&lt;h2 id=&quot;how-are-maths-displayed&quot;&gt;How are Maths Displayed?&lt;/h2&gt;

&lt;p&gt;By default the &lt;code class=&quot;highlighter-rouge&quot;&gt;kramdown&lt;/code&gt; markdown parser will look for math delimiters (&lt;code class=&quot;highlighter-rouge&quot;&gt;$$...$$&lt;/code&gt;, etc.) and convert these into MathJax html tags (&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt; script type=&quot;math/tex&quot;&amp;gt; $$ P=IV $$ &amp;lt;/script&amp;gt;&lt;/code&gt;). Then the javascript included in the header or theme layout will use the specified MathJax version to render on the browser.&lt;/p&gt;

&lt;p&gt;For those who want to use the faster &lt;code class=&quot;highlighter-rouge&quot;&gt;Katex&lt;/code&gt; engine, you can switch out the &lt;code class=&quot;highlighter-rouge&quot;&gt;header&lt;/code&gt; javascript pointing to the MathJax cdn host and instead point to Katex host (see &lt;a href=&quot;https://katex.org/docs/browser.html#starter-template&quot;&gt;here&lt;/a&gt;). Then you turn the MathJax &lt;code class=&quot;highlighter-rouge&quot;&gt;math/tex&lt;/code&gt; script tags into Katex style javascript which executes upon loading the page (see &lt;a href=&quot;https://kramdown.gettalong.org/math_engine/mathjax.html&quot;&gt;here&lt;/a&gt;). Note that I had to remove the &lt;code class=&quot;highlighter-rouge&quot;&gt;defer&lt;/code&gt; part from the Katex starter template &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tags since this will cause the remote javascript pointing to the Katex host to load &lt;em&gt;after&lt;/em&gt; the javascript that tries to convert math via Katex has been executed.&lt;/p&gt;

&lt;h2 id=&quot;displaying-captions-under-images-in-leonids&quot;&gt;Displaying Captions Under Images in Leonids&lt;/h2&gt;

&lt;p&gt;Unfortunately neither kramdown nor my chosen theme, leonids, have good support for captions under photos. Normally you insert a photo in markdown as &lt;code class=&quot;highlighter-rouge&quot;&gt;![alt image text](/path/to/image)&lt;/code&gt;, but in html the alt image text does not show up as a caption.&lt;/p&gt;

&lt;p&gt;The first workaround I found was to insert pure html with a &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;figure&amp;gt; &amp;lt;img src=...&amp;gt; &amp;lt;figcaption&amp;gt;&lt;/code&gt; block and corresponding CSS but that is pretty janky.&lt;/p&gt;

&lt;p&gt;The next workaround is to use liquid tags and a new html file in the &lt;code class=&quot;highlighter-rouge&quot;&gt;_includes&lt;/code&gt; folder that will be rendered upon jekyll build processing. This requires edits to&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the new html file created (mine is &lt;code class=&quot;highlighter-rouge&quot;&gt;_includes/img.html&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!--  ./_includes/img.html --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;figure&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;img&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{{site.url}}/{{ include.file }}&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;alt=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{{ include.caption}}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;figcaption&amp;gt;&lt;/span&gt;{{ include.caption }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/figcaption&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/figure&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;the css file for the class or block defined in html (&lt;code class=&quot;highlighter-rouge&quot;&gt;figure&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;figcaption&lt;/code&gt; above)&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-scss highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// in ./css/main.scss&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;figure&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;figcaption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;text-align&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;center&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;italic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;and finally the markdown has to be written with a liquid &lt;code class=&quot;highlighter-rouge&quot;&gt;include&lt;/code&gt; statement&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{% include img.html file=&quot;assets/img/example/path/to/img.png&quot; caption=&quot;This caption will show up beneath the picture with the formatting as defined in the main css file&quot; %}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;improvements-and-feedback&quot;&gt;Improvements and Feedback&lt;/h2&gt;
&lt;p&gt;For any improvements to content please submit on &lt;a href=&quot;/blog/how-to-guide-jekyll-docker-travis-github&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;

&lt;ul class=&quot;task-list&quot;&gt;
  &lt;li class=&quot;task-list-item&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;task-list-item-checkbox&quot; disabled=&quot;disabled&quot; /&gt;Environment variables for &lt;code class=&quot;highlighter-rouge&quot;&gt;$JEKYLL_VERSION&lt;/code&gt; that propogate across OS’s and into Travis&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://jmcglone.com/guides/github-pages&quot;&gt;The best beginner guide for Jekyll and GitHub Pages&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://jekyllrb.com/docs/&quot;&gt;The docs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Jekyll’s &lt;a href=&quot;https://jekyllrb.com/docs/ruby-101/&quot;&gt;Ruby 101&lt;/a&gt;: describes gems, Gemfiles, and Bundler]&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.seanh.cc/2019/09/29/liquid&quot;&gt;Liquid Templating Crash Course&lt;/a&gt; for extending the functionality of different &lt;code class=&quot;highlighter-rouge&quot;&gt;.html&lt;/code&gt; files and layouts.&lt;/li&gt;
  &lt;li&gt;Official Jekyll Docker &lt;a href=&quot;https://hub.docker.com/r/jekyll/jekyll/&quot;&gt;image&lt;/a&gt; and &lt;a href=&quot;https://github.com/envygeeks/jekyll-docker/blob/master/README.md&quot;&gt;repo&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://fabse.net/blog/2018/07/16/Running-Jekyll-on-Windows-using-Docker/&quot;&gt;Jekyll and Docker on Windows by Fabian Wetzel&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ddewaele.github.io/running-jekyll-in-docker/&quot;&gt;Running Jekyll in Docker&lt;/a&gt; is a great quick and dirty intro to spinning a site up from scratch with Docker&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://tonyho.net/jekyll-docker-windows-and-0-0-0-0/&quot;&gt;Jekyll, Docker, Windows, and 0.0.0.0&lt;/a&gt;: for serving your site locally on Windows.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;footnotes&quot;&gt;Footnotes&lt;/h1&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;~&amp;gt; 3.8&lt;/code&gt; in a Gemile means any version equal to or greater than 3.8 but less than the next major version (4.0) &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot;&gt;
      &lt;p&gt;The syntax for a Windows machine will differ. Using &lt;code class=&quot;highlighter-rouge&quot;&gt;git-bash&lt;/code&gt; (recommended) I used a backslash to escape the current working directory like &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run -v /$(pwd):/srv/jekyll jekyll/jekyll&lt;/code&gt;. For full paths you would need to follow Windows syntax before the colon and Linux after: &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run -v c:\\path\\to\\Windows\\dir:/srv/jekyll ...&lt;/code&gt; &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot;&gt;
      &lt;p&gt;You would want to do this if you’ve updated a gemfile with new themes. Other commands would be &lt;code class=&quot;highlighter-rouge&quot;&gt;docker exec -it &amp;lt;container_name&amp;gt; gem install &quot;new-jekyll-theme&quot;&lt;/code&gt;. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot;&gt;
      &lt;p&gt;In theory you should be able avoid this by caching the gems locally by additionally mounting a volume to the container’s &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bundle&lt;/code&gt; directory (e.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;docker run -v $(pwd):/srv/jekyll -v $(pwd)/gemcache:/usr/local/bundle jekyll/jekyll jekyll build&lt;/code&gt;), but due to permissions errors I was not able to get this to work. &lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:5&quot;&gt;
      &lt;p&gt;Improve &lt;a href=&quot;/blog/how-to-guide-jekyll-docker-travis-github&quot;&gt;this post&lt;/a&gt; by telling me what is the fastest Travis instance os. &lt;a href=&quot;#fnref:5&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Mon, 20 Apr 2020 00:00:00 +0000</pubDate>
        <link>https://smaroukis.github.io/blog/how-to-guide-jekyll-docker-travis-github</link>
        <guid isPermaLink="true">https://smaroukis.github.io/blog/how-to-guide-jekyll-docker-travis-github</guid>
        
        
        <category>code</category>
        
        <category>blogging</category>
        
      </item>
    
      <item>
        <title>Distribution Autotransformers for Intertie Use - Grounding, Tertiary, &amp; Fault Analysis</title>
        <description>
&lt;p&gt;In this post I’ll talk about tying different level distribution systems together with autotransformers and walk through the fault analysis of different tertiary and grounding configurations.&lt;/p&gt;

&lt;ol id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#construction-and-use-cases&quot; id=&quot;markdown-toc-construction-and-use-cases&quot;&gt;Construction and Use Cases&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#winding-configuration&quot; id=&quot;markdown-toc-winding-configuration&quot;&gt;Winding Configuration&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#virtual-tertiary-and-zero-sequence-flux-paths&quot; id=&quot;markdown-toc-virtual-tertiary-and-zero-sequence-flux-paths&quot;&gt;Virtual Tertiary and Zero Sequence Flux Paths&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#protection-of-distribution-autos&quot; id=&quot;markdown-toc-protection-of-distribution-autos&quot;&gt;Protection of Distribution Autos&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#three-terminal-equivalent&quot; id=&quot;markdown-toc-three-terminal-equivalent&quot;&gt;Three Terminal Equivalent&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#sequence-networks&quot; id=&quot;markdown-toc-sequence-networks&quot;&gt;Sequence Networks&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#to-ground-or-not-to-ground-connections-for-3-and-4-wire-system-interties&quot; id=&quot;markdown-toc-to-ground-or-not-to-ground-connections-for-3-and-4-wire-system-interties&quot;&gt;To Ground or Not to Ground? Connections for 3 and 4 Wire System Interties&lt;/a&gt;        &lt;ol&gt;
          &lt;li&gt;&lt;a href=&quot;#single-source-scenarios-radially-fed&quot; id=&quot;markdown-toc-single-source-scenarios-radially-fed&quot;&gt;Single Source Scenarios (Radially Fed)&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#intertie-use-dual-source&quot; id=&quot;markdown-toc-intertie-use-dual-source&quot;&gt;Intertie Use (Dual Source)&lt;/a&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#summary-diagrams-and-tables&quot; id=&quot;markdown-toc-summary-diagrams-and-tables&quot;&gt;Summary Diagrams and Tables&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#radial-use-configuration--protection&quot; id=&quot;markdown-toc-radial-use-configuration--protection&quot;&gt;Radial Use Configuration &amp;amp; Protection&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#intertie-use-configuration--protection&quot; id=&quot;markdown-toc-intertie-use-configuration--protection&quot;&gt;Intertie Use Configuration &amp;amp; Protection&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#fault-flow-summary-diagrams&quot; id=&quot;markdown-toc-fault-flow-summary-diagrams&quot;&gt;Fault Flow Summary Diagrams&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#further-reading&quot; id=&quot;markdown-toc-further-reading&quot;&gt;Further Reading&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#notes--references&quot; id=&quot;markdown-toc-notes--references&quot;&gt;Notes &amp;amp; References&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;construction-and-use-cases&quot;&gt;Construction and Use Cases&lt;/h1&gt;

&lt;p&gt;Autotransformers (“autos”) are a special type of transformer that have their primary and secondary windings electrically connected, allowing for cheaper construction in certain cases but losing the electrical isolation that normal two or three-winding transformers have.&lt;/p&gt;

&lt;p&gt;On the distribution power system they are usually pad-mounted three-phase transformers used to connect two disparate distribution voltage levels together (e.g. 12kV to 21kV). This could be the result of a voltage cutover (upgrade) or when two disparate sources come together over time from system expansion.&lt;/p&gt;

&lt;p&gt;The bushings are labeled as H1, H2, H3, X1, X2, X3, and H0-X0. H0-X0 is the neutral bushing for the wye connection which is brought out to connect to the system neutral (if available). For the ungrounded case it is left unconnected. On the nameplate you should see that for each phase there is a tapped winding which separates the coil into the high and low side windings.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2019/autotransformer/auto-sld.png&quot; alt=&quot;Single line schematic of an autotransformer (only one phase shown)&quot; /&gt;  
    &lt;figcaption&gt;Single line schematic of an autotransformer (only one phase shown)&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;winding-configuration&quot;&gt;Winding Configuration&lt;/h2&gt;

&lt;p&gt;Three-phase autotransformers are normally connected in Wye with a Delta-connected tertiary that can be opened or closed depending on desired operation. This delta tertiary allows for zero-sequence fault currents to flow so that source side protective devices can operate and isolate the faulted section, otherwise the fault duty may be too low for protective devices to detect the fault. The specific fault duty depends on&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the system design (3 wire or 4 wire)&lt;/li&gt;
  &lt;li&gt;the delta tertiary switch status&lt;/li&gt;
  &lt;li&gt;if the H0-X0 bushing is grounded or ungrounded.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Additionally the delta tertiary acts as a stabilizing winding for unbalanced voltages and a path for third harmonics. Specific protection schemes will be explained in detail in the &lt;a href=&quot;#protection-of-distribution-autos&quot;&gt;Protection&lt;/a&gt; section.&lt;/p&gt;

&lt;h2 id=&quot;virtual-tertiary-and-zero-sequence-flux-paths&quot;&gt;Virtual Tertiary and Zero Sequence Flux Paths&lt;/h2&gt;

&lt;p&gt;Just like an imbalance of line currents results in a neutral or zero sequence current, the imbalance of flux in a magnetic core can result in a zero sequence flux. This happens during unbalanced conditions like a single phase-to-ground fault, load imbalance, or neutral shift. For three-phase core type transformer construction there is no return path for zero sequence flux, so the flux must return outside the core which can lead to severe tank heating&lt;sup id=&quot;fnref:c57-105&quot;&gt;&lt;a href=&quot;#fn:c57-105&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. This return path is known as a virtual, phantom, or tank tertiary.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2019/autotransformer/three-legged-core.png&quot; alt=&quot;In the three-legged core (esp. without a tertiary), there is no return path for zero sequence flux. This flux, resulting from single phase faults or voltage imbalance, is forced to return via a high reluctance path outside of the core and can cause heating in conductive material such as the tank. The high reluctance path is known as the 'virtual tertiary'&quot; /&gt;  
    &lt;figcaption&gt;In the three-legged core (esp. without a tertiary), there is no return path for zero sequence flux. This flux, resulting from single phase faults or voltage imbalance, is forced to return via a high reluctance path outside of the core and can cause heating in conductive material such as the tank. The high reluctance path is known as the 'virtual tertiary'&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;To provide a path for zero sequence flux and limit any tank heating during unbalanced conditions, the preferred construction is four or five-legged cores. Note that per IEEE C57.105&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Adding a third winding (tertiary) of a substantially lower power rating and connected Δ reduces the zero-sequence exciting flux by reducing the level to which zero-sequence voltage may rise, but &lt;strong&gt;does not prevent flux from entering the tank&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2019/autotransformer/five-legged-core.png&quot; alt=&quot;A five-legged core construction for a three-phase transformer provides two return paths for zero sequence flux.&quot; /&gt;  
    &lt;figcaption&gt;A five-legged core construction for a three-phase transformer provides two return paths for zero sequence flux.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The economics of autos usually results in a turns ratio near 2:1. That’s why they are used on both Transmission and Distribution levels to tie e.g. 230kV and 115kV together, or 12 and 21kV circuits together.&lt;/p&gt;

&lt;p&gt;An interesting fact is that if you took an existing single phase transformer and turned it into an autotransformer by connecting its primary and secondary windings, you would increase your kVA rating of the transformer. This is due to the fact that not all the current needs to flow over both windings. Using the ideal transformer equation &lt;script type=&quot;math/tex&quot;&gt;V_2/V_1=N_2/N_1&lt;/script&gt; and with &lt;script type=&quot;math/tex&quot;&gt;N_1=N_C+N_S&lt;/script&gt; we can solve for the power that is in common winding, &lt;script type=&quot;math/tex&quot;&gt;P_W&lt;/script&gt; versus the input and output power, &lt;script type=&quot;math/tex&quot;&gt;P_{IO}&lt;/script&gt;.&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
\begin{aligned}
    V_L&amp;=V_H\frac{N_C}{N_C+N_S}  \\ 
    P_W&amp;=I_S(V_H-V_L) \\
    &amp;= I_S V_H(1-\frac{N_C}{N_C+N_S}) \\ 
    &amp;= P_{IO}(\frac{N_S}{N_C+N_S})  \\ 
    &amp; \therefore P_W &lt; P_{IO}
\end{aligned} %]]&gt;&lt;/script&gt;

&lt;h1 id=&quot;protection-of-distribution-autos&quot;&gt;Protection of Distribution Autos&lt;/h1&gt;

&lt;p&gt;The type of system-tie transformer can greatly affect the protection scheme of the distribution circuit. Here we will focus only on Wye connected autos. Note there is only really one (tapped) winding, so there is only one configuration (Delta or Wye) plus a tertiary if available.&lt;/p&gt;

&lt;h2 id=&quot;three-terminal-equivalent&quot;&gt;Three Terminal Equivalent&lt;/h2&gt;

&lt;p&gt;The three terminal equivalent model is used to convert the multi-winding impedances (&lt;script type=&quot;math/tex&quot;&gt;Z_{HL/HT/LT}&lt;/script&gt;) to branch impedances (&lt;script type=&quot;math/tex&quot;&gt;Z_{H/L/T}&lt;/script&gt;) which is used in the zero sequence network for fault analysis.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2019/autotransformer/auto-three-terminal.png&quot; alt=&quot;Three terminal equivalent where H, L, and T are high, low and tertiary windings respectively.&quot; /&gt;  
    &lt;figcaption&gt;Three terminal equivalent where H, L, and T are high, low and tertiary windings respectively.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The branch impedance of one winding is equal to the sum of the adjacent minus the opposite, divided by two. For example:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;Z_H=\frac{Z_{HL}+Z_{HT}-Z_{LT}}{2}&lt;/script&gt;

&lt;h2 id=&quot;sequence-networks&quot;&gt;Sequence Networks&lt;/h2&gt;

&lt;p&gt;A Wye-grounded auto without a tertiary will have the sequence network impedance of just the primary-to-secondary winding for both the positive and zero sequence. Grounded autotransformers with tertiaries (and even without, due to the virtual tertiary) create a zero sequence source of current. Ungrounded autos without a delta tertiary, or with the tertiary switch open, are essentially an open-circuit to zero sequence impedances and are not recommended due to the difficulty of fault detection. Ungrounded autos with a delta tertiary pass un-transformed zero sequence current.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2019/autotransformer/auto-sequence-networks.png&quot; alt=&quot;Sequence networks for autotransformers 1) Wye-grounded without tertiary (or with tertiary switch open) 2) Wye-grounded with delta tertiary and 3) Wye-ungrounded with delta tertiary.&quot; /&gt;  
    &lt;figcaption&gt;Sequence networks for autotransformers 1) Wye-grounded without tertiary (or with tertiary switch open) 2) Wye-grounded with delta tertiary and 3) Wye-ungrounded with delta tertiary.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;The nameplate usually gives the positive sequence impedance for &lt;script type=&quot;math/tex&quot;&gt;Z_1^{HL}&lt;/script&gt; and the zero sequence values as shown above (HL, HT, LT). In modeling it is usually assumed that the negative sequence impedance is equal to the positive.&lt;/p&gt;

&lt;h2 id=&quot;to-ground-or-not-to-ground-connections-for-3-and-4-wire-system-interties&quot;&gt;To Ground or Not to Ground? Connections for 3 and 4 Wire System Interties&lt;/h2&gt;

&lt;p&gt;How to choose what protection is required? It will be based on the fault analysis, which is based on the configuration and grounding of the auto. Let’s walk through some common scenarios when connecting two systems of different voltage levels together.&lt;/p&gt;

&lt;p&gt;Note in the cases we are assuming a 4-wire multi-grounded system and a 3-wire system grounded at the substation only&lt;sup id=&quot;fnref:ca-system&quot;&gt;&lt;a href=&quot;#fn:ca-system&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. Of course even in the “ungrounded” case (uni-ground at the substation), there will still be grounds on the tank and equipment. “Grounding” the transformer means connecting the H0/X0 bushing to the neutral wire and establishing an effective ground.&lt;/p&gt;

&lt;p&gt;Although it will be most common that the autotransformer can be fed from both directions (dual-source), it will help to first investigate the radial case to understand the configuration’s effect on fault currents.&lt;/p&gt;

&lt;h3 id=&quot;single-source-scenarios-radially-fed&quot;&gt;Single Source Scenarios (Radially Fed)&lt;/h3&gt;

&lt;p&gt;These are radial connections where there is no chance of reverse feeding the transformer.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;3-wire system sourcing a 4-wire system&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The 3-wire system is grounded only at the substation, but the 4-wire system is grounded at many points along the primary. &lt;strong&gt;Since we are sourcing a 4-wire multi-grounded system we must ground the auto.&lt;/strong&gt; Closing the tertiary will help stabilize voltages and provide a path for zero sequence current. &lt;strong&gt;This introduces a source of ground current&lt;/strong&gt; so a gang-operated source-side protective device should be used to interrupt the auto feeding &lt;em&gt;upstream&lt;/em&gt; faults. Also there must be no open delta regulators on the 3-wire side since off-neutral taps will shift the neutral point and could cause sensitive ground relays to false target.&lt;strong&gt;⇒ grounded + closed tertiary + source-side protection&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;4-wire system sourcing a 3-wire system&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Since our 3-wire system is an ungrounded primary we don’t necessarily need a ground (protective elements can operate on residual currents), we can unground the autotransformer so it is not a ground source. &lt;strong&gt;For the ungrounded case we must have a closed tertiary to pass zero-sequence currents&lt;/strong&gt;. This is a special technical case for fault analysis — the current does not flow across the common winding and thus is not transformed. The zero sequence impedance used is a calculated value called the series-to-tertiary impedance. &lt;strong&gt;⇒ ungrounded + closed tertiary&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Note that if we had a large generator downstream we would want to ground the transformer.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;3-wire system sourcing a 3-wire system&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Similar to the 4-wire → 3-wire case &lt;strong&gt;⇒ ungrounded + closed tertiary&lt;/strong&gt;. In this case there is no reason to ground since the source system is only grounded at the substation.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;4-wire system sourcing a 4-wire system&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Clearly we will be &lt;strong&gt;grounded&lt;/strong&gt; since we have two multi-grounded systems. But what about the tertiary? We should &lt;strong&gt;open the tertiary&lt;/strong&gt; so that we don’t introduce a ground source. The auto still passes zero sequence currents since it is grounded. &lt;strong&gt;⇒ grounded + open tertiary&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;note that in this case it is important that we have a four or five legged core to have a zero-sequence flux return path for any unbalance or fault conditions&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;intertie-use-dual-source&quot;&gt;Intertie Use (Dual Source)&lt;/h3&gt;

&lt;p&gt;This is the most common since it increases reliability by allowing for uninterrupted power delivery during normal or emergency system maintenance. The only difference for the dual source will be the mix of a 4-wire system with a 3-wire system (since 3W↔3W and 4W↔4W are the same as the radial case).&lt;/p&gt;

&lt;p&gt;&lt;em&gt;4-wire ↔ 3-wire&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Again, anytime we source a 4-wire system with a 3-wire system, we want to provide a good ground at the point of transition (the 4-wire system is already “grounded”)  &lt;strong&gt;⇒ grounded + closed tertiary + source side protection&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;summary-diagrams-and-tables&quot;&gt;Summary Diagrams and Tables&lt;/h1&gt;
&lt;h2 id=&quot;radial-use-configuration--protection&quot;&gt;Radial Use Configuration &amp;amp; Protection&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Source → Load&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Grounding&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Tertiary&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Protection&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;3W→3W&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Ungrounded&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Closed&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;None&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;3W→4W&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Grounded&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Closed&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Source Side&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;4W→3W&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Ungrounded&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Closed&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;None&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;4W→4W&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Grounded&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Open&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;None&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;intertie-use-configuration--protection&quot;&gt;Intertie Use Configuration &amp;amp; Protection&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Source ↔ Load&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Grounding&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Tertiary&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;Protection&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;3W↔3W&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Ungrounded&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Closed&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;None&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;3W↔4W&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Grounded&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Closed&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Source and Load Side&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;4W↔4W&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Grounded&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;Open&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;None&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;fault-flow-summary-diagrams&quot;&gt;Fault Flow Summary Diagrams&lt;/h2&gt;
&lt;p&gt;The fault flow summary is shown in these two diagrams:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2019/autotransformer/auto-protection1.png&quot; alt=&quot;autotransformer fault flow diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2019/autotransformer/auto-protection2.png&quot; alt=&quot;autotransformer fault flow diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Usually distribution autotransformers are located far from the substation, but for autos with a higher fault duty the engineer should check the protection clearing time is below the IEEE C57.109 transformer damage curve.&lt;/p&gt;

&lt;h1 id=&quot;further-reading&quot;&gt;Further Reading&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;IEEE Std C57.105 Guide for Application of Transformers in Three-Phase Distribution Systems&lt;/li&gt;
  &lt;li&gt;IEEE Std C57.158 Guide for the Application of Tertiary and Stabilizing Windings in Power Transformers&lt;/li&gt;
  &lt;li&gt;IEEE Std C57.109 IEEE Guide for Liquid-Immersed Transformers Through-Fault-Current Duration&lt;/li&gt;
  &lt;li&gt;X. Zhang and A. Echeverria, “Three-Winding Autotransformer Fault Study and Impact on Protection Application”, New York Power Authority. [Online]. Available: &lt;a href=&quot;https://www.eiseverywhere.com/file_uploads/a99e2aa556135afc2ea43c68303bd462_zha_pap.pdf&quot;&gt;https://www.eiseverywhere.com/file_uploads/a99e2aa556135afc2ea43c68303bd462_zha_pap.pdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;notes--references&quot;&gt;Notes &amp;amp; References&lt;/h1&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:c57-105&quot;&gt;
      &lt;p&gt;IEEE Guide for Application of Transformers in Three-Phase Distribution Systems, Section 3.3.3 “Zero Sequence Flux” &lt;a href=&quot;#fnref:c57-105&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:ca-system&quot;&gt;
      &lt;p&gt;These are the two most common setups in California. the 4-wire multigrounded system operates at a nominal 20.78 kV with most service transformers connected Line-to-Neutral (12.00 kV) and the 3-wire uni-grounded system operates at a nominal 12.00 kV with service transformers connected Line-to-Line. &lt;a href=&quot;#fnref:ca-system&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Wed, 30 Oct 2019 00:00:00 +0000</pubDate>
        <link>https://smaroukis.github.io/blog/autotransformers</link>
        <guid isPermaLink="true">https://smaroukis.github.io/blog/autotransformers</guid>
        
        <category>technical</category>
        
        <category>electricity</category>
        
        
        <category>engineering</category>
        
        <category>power systems</category>
        
        <category>transformers</category>
        
      </item>
    
      <item>
        <title>Asymmetrical Fault Current</title>
        <description>&lt;p&gt;In selecting equipment and designing protection schemes, a common worst case value of asymmetrical fault current used is 1.6 times the fault duty. I wanted to explore mathematically where this came from and graph the results for various system X and R values. This blog post is the result.&lt;/p&gt;

&lt;h3 class=&quot;no_toc&quot; id=&quot;table-of-contents&quot;&gt;Table of Contents&lt;/h3&gt;
&lt;ol id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#the-origins-of-a-dc-offset&quot; id=&quot;markdown-toc-the-origins-of-a-dc-offset&quot;&gt;The Origins of a DC Offset&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#case-inductive-system-xr-theta-approx-90&quot; id=&quot;markdown-toc-case-inductive-system-xr-theta-approx-90&quot;&gt;Case: Inductive System, &lt;script type=&quot;math/tex&quot;&gt;X&gt;&gt;R&lt;/script&gt;, &lt;script type=&quot;math/tex&quot;&gt;\theta \approx 90°&lt;/script&gt;&lt;/a&gt;    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#conditions-for-maximum-dc-offset&quot; id=&quot;markdown-toc-conditions-for-maximum-dc-offset&quot;&gt;Conditions for Maximum DC Offset&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#conditions-for-no-dc-offset&quot; id=&quot;markdown-toc-conditions-for-no-dc-offset&quot;&gt;Conditions for No DC Offset&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#equation--curve-of-asymmetric-factor&quot; id=&quot;markdown-toc-equation--curve-of-asymmetric-factor&quot;&gt;Equation &amp;amp; Curve of Asymmetric Factor&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#references&quot; id=&quot;markdown-toc-references&quot;&gt;References&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;the-origins-of-a-dc-offset&quot;&gt;The Origins of a DC Offset&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Asymmetry in fault currents due to the inductive nature of power systems results in higher-than-normal transient conditions that may exceed the interrupting rating of devices or cause saturation of relaying CTs (and thus device misoperation).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Asymmetrical fault currents are AC fault currents with a DC offset that quickly decays to zero. The result is higher than normal fault currents that may exceed the interrupting rating of devices or cause saturation of relaying CTs on protective devices. Asymmetry occurs to some degree in all three-phase faults since all phase currents cannot be 0 at the same time. Conversely, line-to-ground are mostly symmetric, since insulator failure or flashoiver usually occurs near voltage peaks (zero-current crossing for naturally reactive systems)&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. Here we’ll talk about asymmetric currents out on the distribution system, far from a generator, so we won’t be taking into account the generator subtransient, transient, and steady state impedances.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Asymmetry occurs to some degree in &lt;strong&gt;all three-phase&lt;/strong&gt; faults since all three-phase currents cannot be 0 simultaneously.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The asymmetry, with respect to the zero axis of the sinusoidal current, arises from the need for currents and voltages to satisfy two rules:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Current must lag voltage by the system phase angle (90° for purely reactive systems)&lt;/li&gt;
  &lt;li&gt;Current cannot change instantaneously across an inductance (and both large conductors and large machines are inductive)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Asymmetrical current can be broken into both a purely symmetrical AC component and a purely aperiodic DC component. The AC component is symmetrical about the y-axis. The DC component is exponentially decaying with a time constant proportional to X/R. The initial magnitude of the DC current depends on the time of occurence due to the closing phase angle determined by the offset from the zero-crossing of the voltage waveform and the system phase angle, &lt;script type=&quot;math/tex&quot;&gt;\theta=\tan^{-1}(X/R)&lt;/script&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/latex/asym-current/asym-current.png&quot; alt=&quot;A basic asymmetrical current waveform&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The asymmetrical waveform is the sum of the DC and AC components. In a power system, it will develop from zero as shown.&lt;/p&gt;

&lt;h2 id=&quot;case-inductive-system-xr-theta-approx-90&quot;&gt;Case: Inductive System, &lt;script type=&quot;math/tex&quot;&gt;X&gt;&gt;R&lt;/script&gt;, &lt;script type=&quot;math/tex&quot;&gt;\theta \approx 90°&lt;/script&gt;&lt;/h2&gt;

&lt;h3 id=&quot;conditions-for-maximum-dc-offset&quot;&gt;Conditions for Maximum DC Offset&lt;/h3&gt;

&lt;p&gt;The worst case is for a fault occuring near a zero-crossing of the voltage where the &lt;em&gt;closing angle&lt;/em&gt; &lt;script type=&quot;math/tex&quot;&gt;\alpha=0&lt;/script&gt;. At this point the current is at a peak, and so an opposing DC current of the same magnitude will be induced. The asymmetric current will then increase until a point when the current sine wave is lagging the voltage by 90°.&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;i_{ac}(t) = \sqrt{2} I_{ac} sin(\omega t + \alpha - \theta)&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;i_{dc}(t) = I_{dc} e^{-\omega tR/X}&lt;/script&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;I_{ac}&lt;/script&gt;, the RMS value of the symmetrical waveform, depends on the type of fault, the pre-fault voltage and equivalent impedance. For three phase faults, &lt;script type=&quot;math/tex&quot;&gt;I_{ac} = V/(Z_1+Z_F)&lt;/script&gt;.&lt;/p&gt;

&lt;p&gt;&lt;script type=&quot;math/tex&quot;&gt;I_{dc}&lt;/script&gt; is the starting value (and maximum) of the DC component. Having no DC voltage to maintain it, the DC component decays with a time constant &lt;script type=&quot;math/tex&quot;&gt;\tau=\frac{X/R}{\omega} =\frac{L}{R}&lt;/script&gt;. Usually the system X/R value is given, where a larger value will cause a slower decay. IEEE/IEC standards use X/R &lt;script type=&quot;math/tex&quot;&gt;=&lt;/script&gt; 17 (&lt;script type=&quot;math/tex&quot;&gt;\tau =&lt;/script&gt; 45ms or ~2.7 cycles), which is an expected value near a distribution breaker, but X/R &amp;gt; 50 is not uncommon for a large generator&lt;sup id=&quot;fnref:2&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;Since current cannot change instantaneously in a power system, the range of the maximum DC offset is&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;i_{asym}(t=0)=0 \\
\Rightarrow i_{dc}(0) = -i_{ac}(0)  \\
-\sqrt{2}I_{ac} \le I_{dc} \le \sqrt{2}I_{ac} \\&lt;/script&gt;

&lt;p&gt;In general, for a asymmetric sinsoidal wave with a DC offset of &lt;script type=&quot;math/tex&quot;&gt;A_0&lt;/script&gt; and a purely symmetric &lt;strong&gt;peak&lt;/strong&gt; of &lt;script type=&quot;math/tex&quot;&gt;A_1&lt;/script&gt;, the RMS value is equal to&lt;sup id=&quot;fnref:3&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;u_{RMS} = \sqrt{A_0^2 + \frac{A_1^2}{2}} \\
= \sqrt{A_0^2 + A_{1,RMS}^2}&lt;/script&gt;

&lt;p&gt;thus the maximum RMS value that the asymmetric fault current can obtain is&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\displaystyle I_{max, asym} = \sqrt{(I_{dc}^2 + I_{ac}^2)} \\
= \sqrt{3} I_{ac} \\
= 1.732 \times I_{ac}&lt;/script&gt;

&lt;p&gt;Since in reality the DC component will decay during the first half cycle before the asymmetric current reaches its peak,&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_{max,asym} \approx 1.6 \times I_{ac}&lt;/script&gt;

&lt;p&gt;(this approximation is also shown in the limit of the &lt;a href=&quot;#equation--curve-of-asymmetric-factor&quot;&gt;graph of asymmetric curve factors&lt;/a&gt; below)&lt;/p&gt;

&lt;h3 id=&quot;conditions-for-no-dc-offset&quot;&gt;Conditions for No DC Offset&lt;/h3&gt;

&lt;p&gt;Conversely if the fault occurs at a voltage peak (zero current crossing), no offset will develop since the closing angle is equal to the system angle.&lt;/p&gt;

&lt;p&gt;In fact the full asymmetrical waveform based on the closing (&lt;script type=&quot;math/tex&quot;&gt;\alpha&lt;/script&gt;) and system (&lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;) angles is&lt;sup id=&quot;fnref:4&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;i_{asym}(t) = I_{ac} (sin(\omega t + \alpha - \theta) - sin(\alpha - \theta) e^{-\omega tR/X})&lt;/script&gt;

&lt;p&gt;With &lt;script type=&quot;math/tex&quot;&gt;\alpha=\theta\approx 90°&lt;/script&gt;,&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;i_{asym}(t) = I_{ac}sin(\omega t)&lt;/script&gt;

&lt;h2 id=&quot;equation--curve-of-asymmetric-factor&quot;&gt;Equation &amp;amp; Curve of Asymmetric Factor&lt;/h2&gt;

&lt;p&gt;The Asymmetry Factor, &lt;script type=&quot;math/tex&quot;&gt;\kappa&lt;/script&gt;, can be used to calculate the total asymmetric current from just the symmetric current and the X/R value of the system.&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa := \frac{I_{asym}}{I_{ac}} \Rightarrow I_{asym} = \kappa I_{ac}&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;I_{RMS, asym} = \sqrt{I_{dc}^2 + I_{ac}^2} \\
= \sqrt{ I_{ac}^2 + (\sqrt{2}I_{ac}e^{-\omega tR/X})^2} \\
= I_{ac} \sqrt{1+2e^{-2\omega t R/X}} \\
\Rightarrow \kappa(t,X,R,\omega) = \sqrt{1+2e^{-2\omega t R/X}}&lt;/script&gt;

&lt;p&gt;And taking &lt;script type=&quot;math/tex&quot;&gt;t=\text{half cycle}=1/120s&lt;/script&gt; since the worst case peak value of the asymmetric current would occur a half cycle after the fault occurence,&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\kappa(X,R) = \sqrt{1+2e^{-2\pi R/X}}&lt;/script&gt;

&lt;p&gt;The equation as a function of X/R is shown in the interactive graph below.&lt;/p&gt;

&lt;div id=&quot;cb165ea6-2b53-4749-a74a-23007c036f6c&quot; style=&quot;height: 100%; width: 100%;&quot; class=&quot;plotly-graph-div&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL=&quot;https://plot.ly&quot;;Plotly.newPlot(&quot;cb165ea6-2b53-4749-a74a-23007c036f6c&quot;, [{&quot;y&quot;: [1.0000034873362755, 1.000028318658172, 1.0001264021319973, 1.0003881278823001, 1.0009286475997388, 1.0018657023091548, 1.0033006508323994, 1.0053074808025657, 1.0079294124783176, 1.0111807212848305, 1.0150513483214005, 1.0195125040789026, 1.024522164881904, 1.030029896495041, 1.03598078914381, 1.042318490926619, 1.0489874293778594, 1.0559343521970252, 1.0631093246902337, 1.0704663103987337, 1.077963442940384, 1.0855630769732811, 1.0932316873186607, 1.1009396689200621, 1.108661076818727, 1.1163733345705935, 1.12405693118547, 1.1316951203342005, 1.1392736308532363, 1.1467803941292616, 1.1542052914756635, 1.1615399228792902, 1.168777397311502, 1.1759121440158509, 1.1829397436942921, 1.1898567782306928, 1.1966606974521394, 1.2033497013892498, 1.2099226365229665, 1.2163789045732143, 1.2227183824772698, 1.228941352310948, 1.23504844001557, 1.2410405619028089, 1.2469188780144262, 1.2526847515125499, 1.2583397133673822, 1.2638854316925998, 1.269323685154173, 1.2746563399461732, 1.2798853298877588, 1.2850126392494414, 1.2900402879645538, 1.294970318924072, 1.2998047870902003, 1.3045457501969113, 1.3091952608344455, 1.3137553597400649, 1.3182280701395341, 1.3226153930032403, 1.3269193030978867, 1.3311417457296095, 1.3352846340874005, 1.33934984710716, 1.3433392277866825, 1.34725458189063, 1.35109767699221, 1.354870241804964, 1.358573965763948, 1.3622104988207144, 1.3657814514210098, 1.369288394638028, 1.3727328604375235, 1.3761163420540987, 1.3794402944606348, 1.3827061349151497, 1.385915243571411, 1.389068964141397, 1.3921686045992818, 1.395215437917974, 1.3982107028304447, 1.401155604609136, 1.4040513158576586, 1.406898977309796, 1.4096996986315415, 1.4124545592225168, 1.4151646090136547, 1.4178308692585146, 1.420454333316007, 1.4230359674226651, 1.4255767114529263, 1.4280774796661528, 1.4305391614393674, 1.4329626219848883, 1.4353487030522274, 1.4376982236137759, 1.4400119805339369, 1.4422907492214823, 1.4445352842650128, 1.4467463200514863, 1.4489245713678578, 1.4510707339859297, 1.4531854852305754, 1.4552694845315355, 1.4573233739590272, 1.4593477787434381, 1.461343307779405, 1.4633105541145883, 1.465250095423483, 1.4671624944666077, 1.4690482995354295, 1.4709080448833842, 1.4727422511433605, 1.4745514257320145, 1.4763360632412799, 1.4780966458174438, 1.4798336435281478, 1.4815475147176778, 1.483238706350891, 1.4849076543461353, 1.4865547838974997, 1.4881805097867313, 1.4897852366851516, 1.4913693594458843, 1.4929332633867216, 1.4944773245639178, 1.4960019100372213, 1.4975073781264263, 1.498994078659726, 1.500462353214145, 1.5019125353483054, 1.5033449508277956, 1.50475991784338, 1.5061577472222956, 1.5075387426328684, 1.5089032007826737, 1.510251411610459, 1.5115836584720408, 1.5129002183203788, 1.514201361880027, 1.5154873538161482, 1.5167584528982783, 1.5180149121590167, 1.5192569790478194, 1.5204848955800498, 1.5216988984814608, 1.5228992193282478, 1.524086084682836, 1.5252597162255324, 1.5264203308821938, 1.5275681409480308, 1.5287033542076904, 1.5298261740517316, 1.530936799589619, 1.5320354257593494, 1.5331222434338216, 1.5341974395240603, 1.5352611970793932, 1.5363136953846876, 1.5373551100547367, 1.5383856131258962, 1.5394053731450534, 1.540414555256022, 1.5414133212834442, 1.5424018298142772, 1.543380236276951, 1.5443486930182615, 1.5453073493780818, 1.5462563517619548, 1.5471958437116375, 1.5481259659736626, 1.5490468565659792, 1.549958650842734, 1.550861481557251, 1.5517554789232677, 1.552640770674482, 1.5535174821224604, 1.5543857362129638, 1.5552456535807324, 1.556097352602786, 1.556940949450278, 1.5577765581389522, 1.5586042905782451, 1.5594242566190704, 1.5602365641003317, 1.5610413188942003, 1.5618386249501908, 1.5626285843380803, 1.563411297289694, 1.564186862239603, 1.5649553758647559, 1.565716933123086, 1.566471627291117, 1.5672195500005979, 1.5679607912742008, 1.5686954395603028, 1.5694235817668816, 1.570145303294552, 1.570860688068764, 1.5715698185711922, 1.5722727758703348, 1.572969639651348, 1.5736604882451373, 1.5743453986567253, 1.5750244465929182, 1.575697706489291, 1.5763652515365083, 1.5770271537060032, 1.5776834837750282, 1.5783343113510988, 1.5789797048958454, 1.5796197317482898, 1.5802544581475628, 1.5808839492550777, 1.5815082691761744, 1.5821274809812513, 1.582741646726394, 1.5833508274735184, 1.583955083310042, 1.5845544733680912, 1.585149055843263, 1.5857388880129488, 1.586324026254234, 1.586904526061384, 1.5874804420629294, 1.5880518280383558, 1.5886187369344174, 1.5891812208810736, 1.5897393312070687, 1.5902931184551565, 1.5908426323969833, 1.591387922047635, 1.5919290356798623, 1.592466020837984, 1.5929989243514844, 1.5935277923483104, 1.5940526702678715, 1.5945736028737578, 1.5950906342661773, 1.5956038078941208, 1.596113166567265, 1.5966187524676134, 1.5971206071608894, 1.597618771607681, 1.5981132861743477, 1.5986041906436934, 1.5990915242254118, 1.5995753255663108, 1.6000556327603168, 1.6005324833582728, 1.6010059143775266, 1.601475962311318, 1.6019426631379723, 1.602406052329899, 1.6028661648624065, 1.6033230352223315, 1.6037766974164933, 1.6042271849799712, 1.6046745309842145, 1.605118768044986, 1.605559928330143, 1.6059980435672614, 1.6064331450511047, 1.6068652636509435, 1.6072944298177252, 1.6077206735911043, 1.6081440246063272, 1.6085645121009835, 1.6089821649216225, 1.609397011530237, 1.6098090800106215, 1.6102183980746048, 1.6106249930681587, 1.611028891977389, 1.6114301214344096, 1.611828707723102, 1.6122246767847634, 1.6126180542236463, 1.6130088653123904, 1.6133971349973508, 1.6137828879038254, 1.6141661483411809, 1.6145469403078823, 1.614925287496426, 1.615301213298182, 1.6156747408081424, 1.6160458928295822, 1.6164146918786322, 1.6167811601887656, 1.617145319715205, 1.6175071921392417, 1.6178667988724797, 1.6182241610609998, 1.6185792995894475, 1.6189322350850441, 1.6192829879215282], &quot;x&quot;: [0.5, 0.6, 0.7, 0.7999999999999999, 0.8999999999999999, 0.9999999999999999, 1.0999999999999999, 1.1999999999999997, 1.2999999999999998, 1.4, 1.4999999999999998, 1.5999999999999996, 1.6999999999999997, 1.7999999999999998, 1.8999999999999997, 1.9999999999999996, 2.0999999999999996, 2.1999999999999997, 2.3, 2.3999999999999995, 2.4999999999999996, 2.5999999999999996, 2.6999999999999993, 2.7999999999999994, 2.8999999999999995, 2.9999999999999996, 3.0999999999999996, 3.1999999999999993, 3.2999999999999994, 3.3999999999999995, 3.499999999999999, 3.599999999999999, 3.6999999999999993, 3.7999999999999994, 3.8999999999999995, 3.999999999999999, 4.1, 4.199999999999999, 4.299999999999999, 4.399999999999999, 4.499999999999999, 4.599999999999999, 4.699999999999999, 4.799999999999999, 4.899999999999999, 4.999999999999999, 5.099999999999999, 5.199999999999999, 5.299999999999999, 5.399999999999999, 5.499999999999999, 5.599999999999999, 5.699999999999999, 5.799999999999999, 5.899999999999999, 5.999999999999999, 6.099999999999999, 6.199999999999998, 6.299999999999999, 6.399999999999999, 6.499999999999998, 6.599999999999999, 6.699999999999998, 6.799999999999999, 6.899999999999999, 6.999999999999998, 7.099999999999999, 7.199999999999998, 7.299999999999999, 7.399999999999999, 7.499999999999998, 7.599999999999999, 7.699999999999998, 7.799999999999998, 7.899999999999999, 7.999999999999998, 8.099999999999998, 8.2, 8.299999999999997, 8.399999999999999, 8.499999999999998, 8.599999999999998, 8.699999999999998, 8.799999999999999, 8.899999999999999, 8.999999999999998, 9.099999999999998, 9.199999999999998, 9.299999999999997, 9.399999999999999, 9.499999999999998, 9.599999999999998, 9.699999999999998, 9.799999999999997, 9.899999999999999, 9.999999999999998, 10.099999999999998, 10.199999999999998, 10.299999999999997, 10.399999999999999, 10.499999999999998, 10.599999999999998, 10.699999999999998, 10.799999999999997, 10.899999999999999, 10.999999999999998, 11.099999999999998, 11.199999999999998, 11.299999999999997, 11.399999999999997, 11.499999999999998, 11.599999999999998, 11.699999999999998, 11.799999999999997, 11.899999999999997, 11.999999999999998, 12.099999999999998, 12.199999999999998, 12.299999999999997, 12.399999999999997, 12.499999999999996, 12.599999999999998, 12.699999999999998, 12.799999999999997, 12.899999999999997, 12.999999999999996, 13.099999999999998, 13.199999999999998, 13.299999999999997, 13.399999999999997, 13.499999999999996, 13.599999999999998, 13.699999999999998, 13.799999999999997, 13.899999999999997, 13.999999999999996, 14.099999999999998, 14.199999999999998, 14.299999999999997, 14.399999999999997, 14.499999999999996, 14.599999999999996, 14.699999999999998, 14.799999999999997, 14.899999999999997, 14.999999999999996, 15.099999999999996, 15.199999999999998, 15.299999999999997, 15.399999999999997, 15.499999999999996, 15.599999999999996, 15.699999999999996, 15.799999999999997, 15.899999999999997, 15.999999999999996, 16.099999999999994, 16.199999999999996, 16.299999999999997, 16.4, 16.499999999999996, 16.599999999999998, 16.699999999999996, 16.799999999999997, 16.899999999999995, 16.999999999999996, 17.099999999999998, 17.199999999999996, 17.299999999999997, 17.399999999999995, 17.499999999999996, 17.599999999999998, 17.699999999999996, 17.799999999999997, 17.899999999999995, 17.999999999999996, 18.099999999999994, 18.199999999999996, 18.299999999999997, 18.399999999999995, 18.499999999999996, 18.599999999999994, 18.699999999999996, 18.799999999999997, 18.899999999999995, 18.999999999999996, 19.099999999999994, 19.199999999999996, 19.299999999999997, 19.399999999999995, 19.499999999999996, 19.599999999999994, 19.699999999999996, 19.799999999999997, 19.899999999999995, 19.999999999999996, 20.099999999999994, 20.199999999999996, 20.299999999999997, 20.399999999999995, 20.499999999999996, 20.599999999999994, 20.699999999999996, 20.799999999999997, 20.899999999999995, 20.999999999999996, 21.099999999999994, 21.199999999999996, 21.299999999999997, 21.399999999999995, 21.499999999999996, 21.599999999999994, 21.699999999999996, 21.799999999999994, 21.899999999999995, 21.999999999999996, 22.099999999999994, 22.199999999999996, 22.299999999999994, 22.399999999999995, 22.499999999999996, 22.599999999999994, 22.699999999999996, 22.799999999999994, 22.899999999999995, 22.999999999999996, 23.099999999999994, 23.199999999999996, 23.299999999999994, 23.399999999999995, 23.499999999999996, 23.599999999999994, 23.699999999999996, 23.799999999999994, 23.899999999999995, 23.999999999999996, 24.099999999999994, 24.199999999999996, 24.299999999999994, 24.399999999999995, 24.499999999999993, 24.599999999999994, 24.699999999999996, 24.799999999999994, 24.899999999999995, 24.999999999999993, 25.099999999999994, 25.199999999999996, 25.299999999999994, 25.399999999999995, 25.499999999999993, 25.599999999999994, 25.699999999999996, 25.799999999999994, 25.899999999999995, 25.999999999999993, 26.099999999999994, 26.199999999999996, 26.299999999999994, 26.399999999999995, 26.499999999999993, 26.599999999999994, 26.699999999999996, 26.799999999999994, 26.899999999999995, 26.999999999999993, 27.099999999999994, 27.199999999999996, 27.299999999999994, 27.399999999999995, 27.499999999999993, 27.599999999999994, 27.699999999999996, 27.799999999999994, 27.899999999999995, 27.999999999999993, 28.099999999999994, 28.199999999999992, 28.299999999999994, 28.399999999999995, 28.499999999999993, 28.599999999999994, 28.699999999999992, 28.799999999999994, 28.899999999999995, 28.999999999999993, 29.099999999999994, 29.199999999999992, 29.299999999999994, 29.399999999999995, 29.499999999999993, 29.599999999999994, 29.699999999999992, 29.799999999999994, 29.899999999999995, 29.999999999999993], &quot;mode&quot;: &quot;markers+lines&quot;, &quot;name&quot;: &quot;t=1/120s&quot;}], {&quot;title&quot;: &quot;Curve of Asymmetry Factors&quot;, &quot;xaxis&quot;: {&quot;type&quot;: &quot;log&quot;, &quot;dtick&quot;: &quot;D1&quot;, &quot;title&quot;: &quot;X/R&quot;}, &quot;yaxis&quot;: {&quot;type&quot;: &quot;log&quot;}}, {&quot;linkText&quot;: &quot;Export to plot.ly&quot;, &quot;showLink&quot;: true})&lt;/script&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;Zocholl, Stanley E., &lt;em&gt;Analyzing and Applying Current Transformers&lt;/em&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot;&gt;
      &lt;p&gt;Yuen, Moon H. “Short Circuit ABC–Learn It in an Hour, Use It Anywhere, Memorize No Formula.” &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://masteringelectronicsdesign.com/how-to-derive-the-rms-value-of-a-sine-wave-with-a-dc-offset/&quot;&gt;https://masteringelectronicsdesign.com/how-to-derive-the-rms-value-of-a-sine-wave-with-a-dc-offset/&lt;/a&gt; &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot;&gt;
      &lt;p&gt;de Metz-Noblat, Benoit, Frédéric Dumas, and Georges Thomasset. “Calculation of short-circuit currents.” &lt;em&gt;Cahier technique 158&lt;/em&gt; &lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Wed, 02 Jan 2019 00:00:00 +0000</pubDate>
        <link>https://smaroukis.github.io/blog/asymmetrical-fault-current</link>
        <guid isPermaLink="true">https://smaroukis.github.io/blog/asymmetrical-fault-current</guid>
        
        <category>technical</category>
        
        <category>electricity</category>
        
        
        <category>engineering</category>
        
        <category>power systems</category>
        
        <category>protection</category>
        
      </item>
    
      <item>
        <title>Mt. Ritter Summit - Ansel Adams Wilderness</title>
        <description>&lt;p&gt;I was fortunate enough to undergo my first true mountaineering experience with two weekends left in summer internship at Pacific Gas &amp;amp; Electric. It was a weekend trip to Ansel Adams wilderness, with epitomic views of the High Sierras and idyllic lakeside camping. We hiked in 6 miles to camp at Ediza Lake and the next day undertook the class 3 climb to the top of Mount Ritter (3,700ft elevation change over 3 miles, 13,143 ft summit).  The access to wilderness in California is unprecedented, and if you’re willing to drive 4.5 hours after work on a Friday, you’ll be rewarded with weekend memories that last a lifetime. (shoutout to Ryan and Aaron for letting my pass out in the  back of the car as they drove both ways).&lt;/p&gt;

&lt;p&gt;You can see the route below, starting at the Agnew Meadows trailhead near the Devils Postpile National Monument, our campsite at Ediza Lake, and the class 3 route to the top of Ritter.&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;500px&quot; frameborder=&quot;0&quot; src=&quot;https://a.tiles.mapbox.com/v4/smaroukis.15aik54i.html?access_token=pk.eyJ1Ijoic21hcm91a2lzIiwiYSI6ImNpcTZyNW96djAwZ3BmbmtrcnZpbXRoMG0ifQ.wlaRgsckB1_vTtYKWEhZJw&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Mt. Ritter sits on the edge of Ansel Adams wilderness, the historic photographer that was famous for his black and white prints.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/ryan-lake.jpg&quot; alt=&quot;Ryan's BW photo of the lake&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ryan woke up early and took some Ansel-inspired pictures of Ediza lake and the Minarets.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/ryan-minarets.jpg&quot; alt=&quot;Ryan BW Minarets&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Then we set off for a big day – three miles to the summit, then 9 more back down all the way to the trailhead.&lt;/p&gt;

&lt;p&gt;The first few miles were meandering up the meadows towards the base of the mountain.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/approach.jpg&quot; alt=&quot;approach&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Then there are some waterfall scrambles on tight precipices, but it is only class 2 or 3. Soon you start to feel very high.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/moraines_below.JPG&quot; /&gt;
    &lt;figcaption&gt; Looking back at the moraines below. &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;There is mention of a frog looking structure. Once you go around that you should see the scree-filled gully that shoots up to the peak. It’s steep, and the rock is crumbly, but it’s maybe 4th class at most.&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/scree1.JPG&quot; /&gt;
    &lt;figcaption&gt; The scree field heads around the corner up and to the right.&lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/scree2.JPG&quot; alt=&quot;scree 2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;There was still some snow left, albeit rotten.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/snowfield1.JPG&quot; alt=&quot;snowfield1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;At the top, it is hard not to feel like you’re on top of the world.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/cover.JPG&quot; alt=&quot;cover&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From the summit, looking out at the whole of Ansel Adams Wilderness&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://smaroukis.github.io/assets/img/2016/ansel_adams/summit-3.JPG&quot; alt=&quot;me&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 14 Aug 2016 00:00:00 +0000</pubDate>
        <link>https://smaroukis.github.io/blog/ansel-adams-wlderness</link>
        <guid isPermaLink="true">https://smaroukis.github.io/blog/ansel-adams-wlderness</guid>
        
        <category>outdoors</category>
        
        
        <category>outdoors</category>
        
      </item>
    
  </channel>
</rss>
